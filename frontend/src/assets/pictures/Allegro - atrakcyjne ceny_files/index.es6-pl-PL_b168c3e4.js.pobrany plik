((t,e)=>{for(var i in e)t[i]=e[i]})(window,(t=>{var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=(t,e,s)=>{i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=(t,e)=>{if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,(e=>t[e]).bind(null,o));return s},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,"a",e),e},i.o=(t,e)=>({}.hasOwnProperty.call(t,e)),i.p="https://assets.allegrostatic.com/sc-13073/",i(i.s=0)})({0(t,e,i){t.exports=i("WdQY")},WdQY(t,e,i){i.r(e);var s=i("rRL6"),o=i.n(s);function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=i("z/3O");const n={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},l=/<|>|&|"|'/g,c=(RegExp(Array.from("javascript:",t=>t+"[\\n\\r\\t]*").join(""),"ig"),t=>n[t]);class h{constructor(t,e){this.$=t[0];for(let i=0;i<e.length;i++){const s=e[i];if(Array.isArray(s))for(let t=0;t<s.length;t++)this.$esc(s[t]);else this.$esc(s);this.$+=t[i+1]}}$esc(t){this.$+=t instanceof h?t.$:(t+"").replace(l,c)}toString(){return this.$}}var u=(t,...e)=>new h(t,e);const d={"pl-PL":{close:[["",["zamknij"]]],"success heading":[["",["Obserwujesz ten sklep!"]]],"success first line":[["",["Teraz znajdziesz swoich ulubionych sprzedawców w jednym miejscu."]]],"success second line":[["",["Przejdź do listy {{link}}."]]],"favourites sellers":[["",["obserwowanych sklepów"]]],"limit failure heading":[["",["Obserwujesz już 300 wyszukiwań"]]],"limit failure first line":[["",["Możesz obserwować tylko 300 wyszukiwań jednocześnie."]]],"limit failure second line":[["",["By dalej dodawać kolejnych ulubionych sprzedawców usuń coś z {{link}}."]]],"favourites sellers list":[["",["listy ulubionych sprzedawców"]]]}},p=/({{[^}]+}}|{%[^%}]+%})/g,m=/({{[^}]+}})/g,f=/({%[^%}]+%})/g,v=/({{\s*|\s*}}|{%\s*|\s*%})/g;function g(t,e=""){if("string"==typeof t)throw Error("Translation has to be an array");return t.find(t=>t[0]===e)[1]}const b=(t,e,i)=>{const s=d["pl-PL"][t];if(!s)throw Error(`Missing translation for lang "pl-PL" and key "${t}"`);return e?((t,e,i)=>{let s=g(t,e.context);return parseInt(e.count,10)>=0?s=((t,e)=>{const i=1==(s=e)?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2;var s;return"boolean"!=typeof i?t[i]:t[i?1:0]})(s,e.count):[s]=s,((t,e,i)=>{if(i){let i=0;return t.split(p).map(s=>{if(s.match(f)){const o=e.formatters[i];if(o)return i+=1,o(s.replace(v,""));throw Error(`Missing translation formatter for "${t}"`)}return s.match(m)?e[s.replace(v,"")]:s})}const s=t.match(p);let o=0;return s?s.reduce((i,s)=>{const r=s.replace(v,"");if(s.match(f)){const a=e.formatters[o];if(a)return o+=1,i.replace(s,a(r));throw Error(`Missing translation formatter for "${t}"`)}return s.match(m)?i.replace(s,e[r]):i},t):t})(s,e,i)})(s,e,i):g(s)[0]};let w;(t=>{t[t.SUCCESS=0]="SUCCESS",t[t.LIMIT_FAILURE=1]="LIMIT_FAILURE"})(w||(w={}));var _="mgn2_14 mp0t_0a mqu1_21 mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 mgmw_ia";let y,S=t=>t;function A({heading:t,firstParagraph:e,secondParagraph:i}){return u(y||(y=S`<div class="${0}"><button type="button" class="${0}" data-role="${0}"><svg class="${0}"><image class="${0}" href="${0}" width="100%" height="100%" /></svg></button><div class="${0}"><div class="${0}"><h4 class="${0}">${0}</h4><p class="${0}">${0}</p><p class="${0}">${0}</p></div></div><div class="${0}"><button type="button" class="${0}" data-role="${0}">${0}</button></div></div>`),"_19cvm _bsryo msts_szl mp7g_f6 mp4t_8 _a440e_2Ok0D","_13q9y _8hkto m0t1_f9 mg9e_0 mvrt_0 mj7a_0 mh36_0","close-message-button","_nem5f","m0s5_ia",a.c,"_9f0v0 msts_szl","mgn2_14 mp0t_0a mqu1_21 mgmw_wo mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0","_1s2v1 _hf7gl mgmw_ia",t,_,e,_,i,"mpof_ki m7f5_6m m389_6m msts_9u","_13q9y _8hkto","close-message-button",b("close"))}let $,k=t=>t;function E(t,e){return u($||($=k`<a class="${0}" href="${0}" rel="noreferrer nofollow">${0}</a>`),"_w7z6o",e,t===w.SUCCESS?b("favourites sellers"):b("favourites sellers list"))}let j,x,L=t=>t;var N={headers:{"Content-Type":"application/vnd.allegro.edgefavouriteshop.v1+json",Accept:"application/vnd.allegro.edgefavouriteshop.v1+json"},withCredentials:!0};window.opbox.component.register({prototypeName:"allegro.seller.shop.watch.star",clientImplementationVersion:o.a},class{constructor({baseNode:t,props:{sellerId:e,activeTitle:i,title:s,isActive:o,favouriteShopsLink:n}}){r(this,"changeButtonText",()=>{if(this.title&&!this.isActive||this.activeTitle&&this.isActive){const t=this.button.querySelector("span");if(t)t.innerText=this.isActive?this.activeTitle:this.title;else{const t=document.createElement("span");t.setAttribute("class","mpof_5r mpof_uk_m"),t.innerText=this.isActive?this.activeTitle:this.title,this.button.append(t)}}else{const t=this.button.querySelector("span");t&&this.button.removeChild(t)}}),r(this,"changeButtonState",()=>{this.isActive=!this.isActive;const t=this.isActive?"unwatchSellerShop":"watchSellerShop";this.icon.setAttribute("href",this.isActive?a.b:a.a),this.button.setAttribute("data-analytics-interaction-label",t),this.changeButtonText(),this.isActive&&this.handleAppendNotification(w.SUCCESS)}),r(this,"handleAppendNotification",t=>{this.baseNode.querySelector('[data-role="notification"]')?t&&t!==this.lastAddedNotification&&(this.removeNotification(),this.appendNotification(t)):this.appendNotification(t)}),r(this,"removeNotification",()=>{const t=this.baseNode.querySelector('[data-role="notification"]');t&&(t.querySelectorAll('[data-role="close-message-button"]').forEach(t=>{t.removeEventListener("click",this.removeNotification)}),this.lastAddedNotification=void 0,this.baseNode.removeChild(t))}),r(this,"appendNotification",t=>{const e=document.createElement("div");e.setAttribute("data-role","notification"),e.innerHTML=((t,e)=>e===w.SUCCESS?u(j||(j=L`${0}`),A({heading:b("success heading"),firstParagraph:b("success first line"),secondParagraph:b("success second line",{link:E(w.SUCCESS,t)},!0)})):e===w.LIMIT_FAILURE?u(x||(x=L`${0}`),A({heading:b("limit failure heading"),firstParagraph:b("limit failure first line"),secondParagraph:b("limit failure second line",{link:E(w.LIMIT_FAILURE,t)},!0)})):"")(this.favouriteShopsLink,t),this.lastAddedNotification=t,this.baseNode.appendChild(e),e.querySelectorAll('[data-role="close-message-button"]').forEach(t=>{t.addEventListener("click",this.removeNotification)})}),r(this,"makeAuthRedirect",()=>{const{hostname:t,href:e}=window.location;window.location.href=`//${t}/logowanie?origin_url=${encodeURIComponent(e)}`}),r(this,"handleAddShopToFavouritesFailure",t=>{409===t.status&&this.handleAppendNotification(w.LIMIT_FAILURE),401===t.status&&this.makeAuthRedirect()}),r(this,"handleRemoveShopFromFavouritesFailure",t=>{401===t.status&&this.makeAuthRedirect()}),r(this,"onClick",()=>this.isActive?(t=>window.opbox.edge.delete("/web-edge/users/favourite-shops/"+t,N).then(t=>204===t.status?Promise.resolve():(window.opbox.reportError(t),Promise.reject())).catch(t=>(window.opbox.reportError(t),Promise.reject(t))))(this.sellerId).then(this.changeButtonState).catch(this.handleRemoveShopFromFavouritesFailure):(t=>window.opbox.edge.put("/web-edge/users/favourite-shops/"+t,null,N).then(t=>201===t.status?Promise.resolve():(window.opbox.reportError(t),Promise.reject(t))).catch(t=>(window.opbox.reportError(t),Promise.reject(t))))(this.sellerId).then(this.changeButtonState).catch(this.handleAddShopToFavouritesFailure)),this.baseNode=t,this.button=this.baseNode.querySelector("button"),this.icon=this.button.querySelector("image"),this.buttonText=this.button.querySelector("span"),this.sellerId=e,this.activeTitle=i,this.title=s,this.isActive=o,this.favouriteShopsLink=n,this.lastAddedNotification=void 0}onMount(){this.button.addEventListener("click",this.onClick)}onUnmount(){this.button.removeEventListener("click",this.onClick)}})},rRL6(t,e){t.exports="0f1"},"z/3O"(t){t.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/star-empty-2c3f1d6b0f.svg","b":"https://assets.allegrostatic.com/metrum/icon/star-full-f9f12f87d5.svg","c":"https://assets.allegrostatic.com/metrum/icon/x-1a6f095eb2.svg"}')}}));
//# sourceMappingURL=index.es6-pl-PL_b168c3e4.js.map