((t,e)=>{for(var i in e)t[i]=e[i]})(window,(t=>{var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=(t,e,s)=>{i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=(t,e)=>{if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,(e=>t[e]).bind(null,o));return s},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,"a",e),e},i.o=(t,e)=>({}.hasOwnProperty.call(t,e)),i.p="https://assets.allegrostatic.com/sc-9171/",i(i.s=0)})({0(t,e,i){t.exports=i("O14P")},GI1G(t){t.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/arrowhead-9148b8f39c.svg"}')},O14P(t,e,i){i.r(e);var s=i("rRL6"),o=i.n(s);function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i("sBL/"),l=i.n(n);const a={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},h=/<|>|&|"|'/g,c=(RegExp(Array.from("javascript:",t=>t+"[\\n\\r\\t]*").join(""),"ig"),t=>a[t]);class m{constructor(t,e){this.$=t[0];for(let i=0;i<e.length;i++){const s=e[i];if(Array.isArray(s))for(let t=0;t<s.length;t++)this.$esc(s[t]);else this.$esc(s);this.$+=t[i+1]}}$esc(t){this.$+=t instanceof m?t.$:(t+"").replace(h,c)}toString(){return this.$}}var u=i("GI1G");let d,_=t=>t;var v=t=>((t,...e)=>new m(t,e))(d||(d=_`<button type="button" class="${0}" data-analytics-interaction data-analytics-interaction-label="navButton" data-analytics-interaction-value="${0}" data-role="carousel-${0}-button" tabindex="-1" aria-hidden="true"><img alt="" src="${0}" class="${0}"></button>`),"next"===t?"mgn2_14 mp0t_0a m9qz_yo mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mp7g_f6 mvrt_0 mh36_0 _d95e1_2GKQ2 msts_k0 mj6k_n7 cr1tsk _d95e1_3NiQf _d95e1_RbXt4 cru7dy":"mgn2_14 mp0t_0a m9qz_yo mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mp7g_f6 mvrt_0 mh36_0 _d95e1_2GKQ2 msts_k0 mj6k_n7 cr1tsk _d95e1_3NiQf _d95e1_RbXt4 cr1yz1",t,t,u.a,"next"===t?"mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 isflp":"mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 isflp _d95e1_1Yhs9 im7gu");const b=t=>Math.round(t-.99*t),g=t=>t.split(" "),p=g("msts_k0 mj6k_n7 cr1tsk"),f=g("_d95e1_2GKQ2"),w=(t,e)=>{const i=t.classList;e?(i.add(...p),i.remove(...f)):(i.remove(...p),i.add(...f))};window.opbox.component.register({prototypeName:"allegro.carousel",clientImplementationVersion:o.a},class{constructor({baseNode:t}){r(this,"setObservedItems",t=>{this.unobserveCarouselItems(),t.forEach(t=>{const e=this.carouselItems.indexOf(t.target);this.itemsEntries.set(e,t),(t=>{const{intersectionRatio:e,boundingClientRect:{left:i,right:s},rootBounds:{left:o,right:r}}=t,n=o>i,l=r<s;return e>=.75||n&&l||o===i&&l||r===s&&n})(t)?this.markItemAsVisible(t.target):this.markItemAsHidden(t.target)}),this.onObservedItemsUpdate()}),r(this,"onScrollAnimationProgress",t=>{this.scrollContainer.scrollLeft=t}),r(this,"onResize",l()(()=>this.setCarouselVisibility(),120)),r(this,"onHorizontalScrollStart",()=>{this.isScrollingAnimationFinished=!1}),r(this,"onHorizontalScrollEnd",l()(()=>{this.isScrollingAnimationFinished=!0,this.observeCarouselItems()},120)),r(this,"onNextButtonClick",t=>this.scrollIfPossible(t,()=>Math.ceil(this.getNextItemScrollDelta()))),r(this,"onPrevButtonClick",t=>this.scrollIfPossible(t,()=>Math.floor(this.getPreviousItemScrollDelta()))),r(this,"initializeCarouselOnInViewportEvent",()=>{this.baseNode.removeEventListener("inViewport",this.initializeCarouselOnInViewportEvent),this.initializeCarousel()}),r(this,"renderNavigationButtonsOnce",()=>{this.removeMouseoverListener();const t=this.window.document.createElement("div");t.innerHTML+=v("prev"),t.innerHTML+=v("next"),this.carouselNode.appendChild(t.firstElementChild),this.carouselNode.appendChild(t.lastElementChild),this.prevButton=this.carouselNode.querySelector('[data-role="carousel-prev-button"]'),this.nextButton=this.carouselNode.querySelector('[data-role="carousel-next-button"]'),this.prevButton.addEventListener("click",this.onPrevButtonClick),this.nextButton.addEventListener("click",this.onNextButtonClick),this.refreshButtonVisibility()}),r(this,"removeMouseoverListener",()=>{this.window.removeEventListener("touchstart",this.removeMouseoverListener),this.window.removeEventListener("mouseover",this.renderNavigationButtonsOnce)}),this.window=window,this.baseNode=t,this.carouselNode=t.querySelector('[data-role="carousel"]'),this.scrollContainer=this.carouselNode.querySelector('[data-role="carousel-container"]'),this.prevButton=null,this.nextButton=null,this.carouselItems=[],this.itemsEntries=new Map,this.scrollOnData=this.carouselNode.hasAttribute("data-scroll-ondata"),this.lastHorizontalScrollPosition=0,this.isCarouselInitialized=!1,this.isScrollPossible=!1,this.isScrollingAnimationFinished=!0,this.lastScrollingDirection=null}markItemAsVisible(t){this.window.opbox.boxViewsMarker.markBoxAsVisible(t.closest("[data-item]"),!0)}markItemAsHidden(t){this.window.opbox.boxViewsMarker.markBoxAsHidden(t.closest("[data-item]"))}getCurrentScrollPosition(){const{boundingClientRect:{left:t},rootBounds:{left:e}}=this.itemsEntries.get(0);return Math.floor(Math.abs(t-e))}onObservedItemsUpdate(){const t=this.getCurrentScrollPosition();t!==this.lastHorizontalScrollPosition&&(this.lastScrollingDirection=t>this.lastHorizontalScrollPosition?"next":"prev"),this.isScrollingAnimationFinished&&this.lastScrollingDirection&&(this.window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.scrollContainer,label:"scroll",value:this.lastScrollingDirection}),this.lastScrollingDirection=null),this.lastHorizontalScrollPosition=t,this.isScrollPossible=this.isScrollingAnimationFinished,this.refreshButtonVisibility()}unobserveCarouselItems(){this.carouselItems.forEach(t=>{this.intersectionObserver.unobserve(t)})}observeCarouselItems(){this.carouselItems.forEach(t=>{this.intersectionObserver.observe(t)})}setCarouselVisibility(){this.unobserveCarouselItems(),this.carouselItems=Array.from(this.scrollContainer.querySelectorAll(".carousel-item")),this.carouselItems.length?(this.carouselNode.classList.remove("mpof_5r"),this.observeCarouselItems()):this.carouselNode.classList.add("mpof_5r")}getVisibleItemIndexes(){const t=this.carouselItems.findIndex((t,e)=>this.itemsEntries.get(e).intersectionRatio>0),e=this.carouselItems.findIndex((e,i)=>i>t&&0===this.itemsEntries.get(i).intersectionRatio),i=(e>=0?e:this.carouselItems.length)-1;return[t,i]}getCarouselBoundries(){const{rootBounds:{left:t,right:e}}=this.itemsEntries.get(0);return[t,e]}getMaxPreviousScrollDelta(t){const[e,i]=this.getCarouselBoundries(),s=i-e,{boundingClientRect:{left:o,right:r,width:n}}=this.itemsEntries.get(t),{boundingClientRect:{left:l,right:a,width:h}}=this.itemsEntries.get(t-1);return o<e-b(n)?n>s?-e+o:-i+r:h>s?l-e:-(i-a)}getFarthestAwayPreviousItem(t,e){const[i]=this.getCarouselBoundries();let s;for(let o=t;o>=0;o-=1){const t=this.itemsEntries.get(o);if(!(t.boundingClientRect.left-i+b(t.boundingClientRect.width)>=e))break;s=t}return s}getPreviousItemScrollDelta(){const[t]=this.getVisibleItemIndexes();if(t-1<0)return-this.lastHorizontalScrollPosition;const[e]=this.getCarouselBoundries(),i=this.getMaxPreviousScrollDelta(t);return this.getFarthestAwayPreviousItem(t,i).boundingClientRect.left-e}getNextItemScrollDelta(){const[,t]=this.getVisibleItemIndexes(),{boundingClientRect:{left:e,right:i},intersectionRatio:s}=this.itemsEntries.get(t),o=this.itemsEntries.get(t+1),[r,n]=this.getCarouselBoundries();return!(s>=.99)&&e>r?e-r:o?o.boundingClientRect.left-r:i-n}scrollIfPossible(t,e){t.preventDefault(),this.isScrollPossible&&(this.isScrollPossible=!1,this.scrollToByDelta(e()))}scrollToByDelta(t){const e=this.lastHorizontalScrollPosition+t;this.isScrollingAnimationFinished=!1,this.window.opbox.tween(this.lastHorizontalScrollPosition,e,this.onScrollAnimationProgress,{duration:800,onFinish:()=>{this.onScrollAnimationProgress(e),this.onHorizontalScrollEnd()}})}getMaxScrollPosition(){const t=this.itemsEntries.get(this.carouselItems.length-1);if(!t)return 0;const{boundingClientRect:{right:e},rootBounds:{right:i}}=t;return Math.floor(this.lastHorizontalScrollPosition+e-i)}refreshButtonVisibility(){if(!this.prevButton&&!this.nextButton)return;const t=this.lastHorizontalScrollPosition<this.getMaxScrollPosition(),e=this.lastHorizontalScrollPosition>0;w(this.prevButton,e),w(this.nextButton,t)}onUpdate(){this.scrollOnData&&this.scrollToByDelta(-this.lastHorizontalScrollPosition)}listenForCarouselItemsChanges(){this.mutationObserver=new MutationObserver(t=>{t.filter(({type:t,target:{classList:e}})=>"childList"===t||"attributes"===t&&e.contains("lazyloaded")).length>0&&this.setCarouselVisibility()}),this.mutationObserver.observe(this.scrollContainer,{attributes:!0,childList:!0,subtree:!0})}initializeCarousel(){this.intersectionObserver=new IntersectionObserver(this.setObservedItems,{root:this.carouselNode,threshold:[0,1]}),this.listenForCarouselItemsChanges(),this.setCarouselVisibility(),this.window.addEventListener("resize",this.onResize),this.scrollContainer.addEventListener("scroll",this.onHorizontalScrollStart),this.scrollContainer.addEventListener("scroll",this.onHorizontalScrollEnd),this.window.addEventListener("touchstart",this.removeMouseoverListener),this.window.addEventListener("mouseover",this.renderNavigationButtonsOnce),this.isCarouselInitialized=!0}onMount(){this.window.opbox.boxViewsMarker.isBoxInViewport(this.baseNode)?this.initializeCarousel():this.baseNode.addEventListener("inViewport",this.initializeCarouselOnInViewportEvent)}onUnmount(){this.isCarouselInitialized&&(this.window.removeEventListener("resize",this.onResize),this.scrollContainer.removeEventListener("scroll",this.onHorizontalScrollStart),this.scrollContainer.removeEventListener("scroll",this.onHorizontalScrollEnd),this.prevButton&&this.nextButton&&(this.prevButton.removeEventListener("click",this.onPrevButtonClick),this.nextButton.removeEventListener("click",this.onNextButtonClick)),this.mutationObserver.disconnect(),this.intersectionObserver.disconnect())}})},rRL6(t,e){t.exports="c48"},"sBL/"(t,e){function i(t,e,i){var s,o,r,n,l;function a(){var h=Date.now()-n;h<e&&h>=0?s=setTimeout(a,e-h):(s=null,i||(l=t.apply(r,o),r=o=null))}null==e&&(e=100);var h=function(){r=this,o=arguments,n=Date.now();var h=i&&!s;return s||(s=setTimeout(a,e)),h&&(l=t.apply(r,o),r=o=null),l};return h.clear=()=>{s&&(clearTimeout(s),s=null)},h.flush=()=>{s&&(l=t.apply(r,o),r=o=null,clearTimeout(s),s=null)},h}i.debounce=i,t.exports=i}}));
//# sourceMappingURL=index.es6_96b699d1.js.map