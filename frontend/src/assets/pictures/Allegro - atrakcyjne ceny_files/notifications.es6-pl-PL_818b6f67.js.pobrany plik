(window.webpackJsonp_13850=window.webpackJsonp_13850||[]).push([[1],{t40z(e,t,i){i.r(t),i.d(t,"default",()=>u);var o=i("rePB");const a={"Allegro.pl - wygodne i bezpieczne zakupy online, największy wybór ofert":[["",["Allegro.pl - wygodne i bezpieczne zakupy online, największy wybór ofert"]]],Kategorie:[["",["Kategorie"]]],Zaloguj:[["",["Zaloguj"]]],Wyloguj:[["",["Wyloguj"]]],"Moje Allegro":[["",["Moje Allegro"]]],Powiadomienia:[["",["Powiadomienia"]]],"Liczba powiadomień":[["",["Liczba powiadomień: {{notificationsCount}}"]]],"Rozwiń menu z wiadomościami":[["",["Rozwiń menu z wiadomościami"]]],"Rozwiń menu z powiadomieniami":[["",["Rozwiń menu z powiadomieniami"]]],więcej:[["",["więcej"]]]},n=/({{[^}]+}}|{%[^%}]+%})/g,r=/({{[^}]+}})/g,s=/({%[^%}]+%})/g,c=/({{\s*|\s*}}|{%\s*|\s*%})/g;function l(e,t=""){if("string"==typeof e)throw Error("Translation has to be an array");return e.find(e=>e[0]===t)[1]}class u{constructor(e,t,i){Object(o.a)(this,"onUpdate",e=>{Object.keys(e).forEach(t=>{this.renderElement({notificationName:t,value:e[t]})})}),Object(o.a)(this,"getBadgesCount",(e,t)=>t.reduce((t,i)=>t+(e[i]||0),0)),Object(o.a)(this,"formatByThreshold",(e,t)=>e<t?""+e:t-1+"+"),this.services=t,this.baseNode=e,this.props=i}initialize(){this.register()}register(){this.services.get("opbox-notification-service").then(e=>{e.getNotifications(e=>{const t=this.getBadgesCount(e,this.props.subscribedNotificationBadges);this.onUpdate(Object.assign({},e,{userDropdownTotal:t}))})})}renderElement({notificationName:e,value:t}){const i=this.baseNode.querySelector(`[data-notification-tag="${e}"]`);if(i)if(0===t)i.textContent="",i.setAttribute("aria-label","");else{const e=this.formatByThreshold(t,100);i.textContent=e,i.setAttribute("aria-label",((e,t,i)=>{const o=a["Liczba powiadomień"];if(!o)throw Error('Missing translation for lang "pl-PL" and key "Liczba powiadomień"');return t?((e,t,i)=>{let o=l(e,t.context);return parseInt(t.count,10)>=0?o=((e,t)=>{const i=1==(o=t)?0:o%10>=2&&o%10<=4&&(o%100<10||o%100>=20)?1:2;var o;return"boolean"!=typeof i?e[i]:e[i?1:0]})(o,t.count):[o]=o,((e,t,i)=>{const o=e.match(n);let a=0;return o?o.reduce((i,o)=>{const n=o.replace(c,"");if(o.match(s)){const r=t.formatters[a];if(r)return a+=1,i.replace(o,r(n));throw Error(`Missing translation formatter for "${e}"`)}return o.match(r)?i.replace(o,t[n]):i},e):e})(o,t)})(o,t):l(o)[0]})(0,{notificationsCount:e}))}}}}}]);
//# sourceMappingURL=notifications.es6-pl-PL_818b6f67.js.map