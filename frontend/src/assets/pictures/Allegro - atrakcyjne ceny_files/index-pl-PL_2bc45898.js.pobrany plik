!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){function t(t){for(var n,i,s=t[0],o=t[1],a=0,c=[];a<s.length;a++)i=s[a],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=s);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+""+({1:"modal"}[e]||e)+"-pl-PL_2bc45898.js"}(e),0!==a.src.indexOf(window.location.origin+"/")&&(a.crossOrigin="anonymous");var u=Error();o=function(t){a.onerror=a.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",u.name="ChunkLoadError",u.type=i,u.request=s,n[1](u)}r[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://assets.allegrostatic.com/sc-12731/",i.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp_535b5=window.webpackJsonp_535b5||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var u=o;return i(i.s=0)}({"/ZMk":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return!!e&&!!e.type}},0:function(e,t,n){e.exports=n("WdQY")},"1OyB":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},"2/er":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("rePB"),i=n("1OyB"),s=n("vuIU"),o=n("8R+5"),a={ActiveSuggestionIndex:"activeSuggestionIndex",NextPhrase:"nextPhrase",Suggestions:"suggestions",Tracking:"tracking",InputPhrase:"inputPhrase",SelectedFilterIndex:"selectedFilterIndex",CheckedAdvancedSearchCriteriaIds:"checkedAdvancedSearchCriteriaIds"},u=function(e){var t,n=e.inputPhrase,r=e.filters,i=void 0===r?{list:[],selected:0}:r,s=e.advancedSearchCriterias,o=void 0===s?[]:s;return{activeSuggestionIndex:-1,inputPhrase:n,nextPhrase:n,selectedFilterIndex:null!==(t=i.selected)&&void 0!==t?t:0,suggestions:[],tracking:{},checkedAdvancedSearchCriteriaIds:o.filter((function(e){return e.checked})).map((function(e){return e.id}))}},c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(o.a)();Object(i.a)(this,e),this.props=t,this.emitter=n,this.state=u(t)}return Object(s.a)(e,[{key:"on",value:function(){var e;return(e=this.emitter).on.apply(e,arguments)}}]),e}();Object.values(a).forEach((function(e){return Object.defineProperty(c.prototype,e,{get:function(){return this.state[e]},set:function(t){this.state=Object.assign({},this.state,Object(r.a)({},e,t)),this.emitter.emit(e,this.state)}})})),t.b=c},"8R+5":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return{events:{},emit:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(this.events[e]||[]).forEach((function(e){return e.apply(void 0,n)}))},on:function(e,t){var n=this;return(this.events[e]=this.events[e]||[]).push(t),function(){return n.events[e]=(n.events[e]||[]).filter((function(e){return e!==t}))}}}}},BoSU:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"i",(function(){return c})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return d}));var r="mpof_5r",i="mpof_z0",s="m3h2_8",o="m9qz_yr",a="mgmw_s9",u="mgmw_vr",c="_133zv",h="mjb5_w1 mp7g_oz mq1m_0 mnjl_0 mj7u_0 mg9e_8 mvrt_8 mj7a_8 mh36_8",d="mjb5_w0 mp7g_oz mq1m_0 mnjl_0 mj7u_0 mg9e_8 mvrt_8 mj7a_8 mh36_8"},BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("a3WO");function i(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},GI1G:function(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/arrow-f0934b0f84.svg","b":"https://assets.allegrostatic.com/metrum/icon/x-1a6f095eb2.svg"}')},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("a3WO"),i=n("BsWD");function s(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},NQGS:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return b}));var r=n("dtw6"),i=function(e){return'[data-role="'.concat(e,'"]')},s=i(r.a),o=i(r.b),a=i(r.c),u=i(r.e),c=i(r.f),h=i(r.g),d=i(r.h),l=i(r.i),f=i(r.j),v=i(r.k),g=i(r.l),p=i(r.m),m=i(r.n),y=i(r.o),b=i(r.p);i(r.q)},"O/fH":function(e,t,n){"use strict";n.d(t,"g",(function(){return h})),n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"k",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return S})),n.d(t,"l",(function(){return k})),n.d(t,"m",(function(){return O})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return j})),n.d(t,"r",(function(){return w})),n.d(t,"n",(function(){return L})),n.d(t,"o",(function(){return _})),n.d(t,"f",(function(){return C}));var r=n("ODXe"),i=n("KQm4"),s=n("/ZMk"),o=n("BoSU"),a=n("a0sk"),u=n("2/er"),c=function(e){return function(){e&&(e(),e=null)}},h=c((function(){return performance.mark("searchFirstCharacterTyped")})),d=c((function(){return performance.mark("searchSuggestBackendResponse")})),l=c((function(){return performance.mark("searchSuggestSuggestionRendered")}));function f(e,t){return[].concat(Object(i.a)(e.filter((function(e){return!t.includes(e)}))),Object(i.a)(t.filter((function(t){return!e.includes(t)}))))}function v(e,t,n){var r=n.filters.list[t.selectedFilterIndex];return!!Object(s.a)(r)&&e.includes(r.type)}function g(e){return""===e}function p(e,t){return!t.enableSuggestionsForEmptyPhrase&&g(e)}var m=[a.d],y=[a.h,a.i,a.c,a.f];function b(e,t){return v(y,e,t)||!t.advancedSearchCriterias.length}var S=function(e,t){return e.reduce((function(e,n){var i=Object(r.a)(e,2),s=i[0],o=i[1],a=n.queryParameter,u=n.id;return t.includes(u)?s.push(a):o.push(a),[s,o]}),[[],[]])},k=function(e,t){t?(e.classList.add(o.e),e.classList.remove(o.f)):(e.classList.add(o.f),e.classList.remove(o.e))},E=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(r||e[t]!==n)&&(e[t]=n)},O=function(e,t){E(e,u.a.ActiveSuggestionIndex,t)},I=function(e,t){E(e,u.a.InputPhrase,t)},j=function(e,t){E(e,u.a.NextPhrase,t,!0)},w=function(e,t){E(e,u.a.SelectedFilterIndex,t)},L=function(e,t){E(e,u.a.CheckedAdvancedSearchCriteriaIds,t)};function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=t.location,r=n.pathname,i=n.search,s=n.hash;e!==s&&(t.history.pushState({previousHash:s},t.document.title,"".concat(r).concat(i).concat(e)),t.dispatchEvent(new HashChangeEvent("hashchange")))}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!!(void 0!==e&&e.navigator&&e.navigator.platform&&(/iP(ad|hone|od)/.test(e.navigator.platform)||"MacIntel"===e.navigator.platform&&e.navigator.maxTouchPoints>1))}},ODXe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("BsWD");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},QUfp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return h}));var r="BLUR",i="CLICK",s="INPUT",o="KEY_ARROW_DOWN",a="KEY_ARROW_UP",u="KEY_ESCAPE",c="KEY_DELETE",h="KEY_TAB"},SnNx:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}));var r="",i="#search-modal-open",s=200},WdQY:function(e,t,n){"use strict";n.r(t);var r=n("rRL6"),i=n.n(r),s=n("1OyB"),o=n("vuIU"),a=n("rePB"),u=n("KQm4"),c=function(e){return["SUGGESTION","SUGGESTION_WITH_IMAGE"].includes(e.componentType)},h=n("NQGS"),d=n("f6k1"),l=n("SnNx"),f=n("2/er"),v=n("O/fH"),g=function(e){return{type:e.code||e.type,id:e.id}},p=function(e){var t=e.filter(c).find((function(e){return"AD"===e.suggestionType}));return t?t.tracking.campaignId:null},m=function(e){return e.filter(c).reduce((function(e,t){var n=t.tracking.type;return e.types[n]?e.types[n]+=1:e.types[n]=1,e.count+=1,e}),{types:{},count:0})},y=function(){function e(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;Object(s.a)(this,e),Object(a.a)(this,"previousHash",""),Object(a.a)(this,"stateUnbinders",[]),Object(a.a)(this,"suggesterUnbinders",[]),Object(a.a)(this,"onSuggesterClickSuggestion",(function(e){i.sendSuggestHintClickEvent(e)})),Object(a.a)(this,"onSuggesterToggleExpanded",(function(e){i.sendSuggestLayerViewEvent(e)})),Object(a.a)(this,"onSuggesterReceivedSuggestions",(function(e){i.sendSuggestionsShowEvent(e)})),Object(a.a)(this,"onSuggesterClickRemoveSuggestion",(function(e){i.sendSuggestionRemoveClickEvent(e)})),Object(a.a)(this,"onSuggesterClickRewriteSuggestion",(function(e){i.sendRewriteClickEvent(e)})),Object(a.a)(this,"sendFilterChangeEvent",(function(e){var t,n=e.selectedFilterIndex,r=null!==(t=i.filtersList[n])&&void 0!==t?t:i.filtersList[0];i.sendEvent("filterChange",r.name)})),Object(a.a)(this,"sendSuggestionsShowEvent",(function(e){var t=Object.assign({status:e,searchPhrase:i.store.inputPhrase,suggestions:m(i.store.suggestions),scope:g(i.filtersList[i.store.selectedFilterIndex])},i.store.tracking),n=p(i.store.suggestions);n&&(t.campaignId=n),i.sendEvent("suggestionsShow",encodeURIComponent(i.store.inputPhrase),t)})),Object(a.a)(this,"sendAdvancedSearchCheckedEvent",(function(e){var t=e.checkedAdvancedSearchCriteriaIds,n=Object(v.j)(t,i.previousCheckedAdvancedSearchCriteriaIds)[0];i.sendEvent(n,t.includes(n).toString()),i.previousCheckedAdvancedSearchCriteriaIds=Object(u.a)(t)})),this.baseNode=t,this.store=n,this.props=r,this.targetWindow=o,this.searchFormNode=t.querySelector(h.m),this.searchInputNode=t.querySelector(h.n),this.searchButtonNode=t.querySelector(h.l),this.filtersList=r.filters.list,this.previousCheckedAdvancedSearchCriteriaIds=Object(u.a)(n.checkedAdvancedSearchCriteriaIds)}return Object(o.a)(e,[{key:"mount",value:function(e){this.props.enableFullscreen&&this.sendModalViewEvent(),this.addEventListeners(),this.addStateListeners(),this.addSuggesterListeners(e)}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners(),this.removeSuggesterListeners()}},{key:"addEventListeners",value:function(){this.props.enableFullscreen&&this.targetWindow.addEventListener(d.f,this),this.searchFormNode.addEventListener(d.k,this),this.searchInputNode.addEventListener(d.h,this),this.searchButtonNode.addEventListener(d.h,this),this.searchButtonNode.addEventListener(d.i,this)}},{key:"removeEventListeners",value:function(){this.props.enableFullscreen&&this.targetWindow.removeEventListener(d.f,this),this.searchFormNode.removeEventListener(d.k,this),this.searchInputNode.removeEventListener(d.h,this),this.searchButtonNode.removeEventListener(d.h,this),this.searchButtonNode.removeEventListener(d.i,this)}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on(f.a.SelectedFilterIndex,this.sendFilterChangeEvent),this.store.on(f.a.CheckedAdvancedSearchCriteriaIds,this.sendAdvancedSearchCheckedEvent))}},{key:"addSuggesterListeners",value:function(e){this.suggesterUnbinders.push(e.on("CLICK_SUGGESTION",this.onSuggesterClickSuggestion),e.on("TOGGLE_IS_EXPANDED",this.onSuggesterToggleExpanded),e.on("RECEIVE_SUGGESTIONS",this.onSuggesterReceivedSuggestions),e.on("CLICK_REMOVE_SUGGESTION",this.onSuggesterClickRemoveSuggestion),e.on("CLICK_REWRITE_SUGGESTION",this.onSuggesterClickRewriteSuggestion))}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===d.k&&this.onSubmit(),e.type===d.h&&"Enter"===e.key&&this.sendSearchInteraction(e),e.type===d.i&&this.sendSearchInteraction(e),e.type===d.f&&this.sendModalViewEvent()}},{key:"sendEvent",value:function(e,t,n,r){window.opbox.analytics.sendEvent({contextNode:this.searchInputNode,action:e,customParams:n,label:r,value:t})}},{key:"onSubmit",value:function(){if(-1!==this.store.activeSuggestionIndex){var e=this.store.suggestions.filter(c)[this.store.activeSuggestionIndex];this.sendSuggestHintClickEvent(e)}}},{key:"sendSuggestLayerViewEvent",value:function(e){if(e){var t={searchPhrase:this.store.inputPhrase};this.sendEvent("suggestLayerView","1",t)}}},{key:"sendSuggestHintClickEvent",value:function(e){this.sendEvent("suggestHintClick",e.completion.text,Object.assign({typedPhrase:this.store.inputPhrase?this.store.inputPhrase:null,searchPhrase:e.completion.text},e.tracking,{},this.store.tracking))}},{key:"sendSearchInteraction",value:function(e){var t,n=this.store.inputPhrase.trim(),r=e.type===d.h?"searchEnter":"searchClick",i={scope:g(null!==(t=this.filtersList[this.store.selectedFilterIndex])&&void 0!==t?t:{}),details:{phrase:n}};window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.searchInputNode,label:r,customParams:i})}},{key:"sendSuggestionRemoveClickEvent",value:function(e){this.sendEvent("suggestionRemoveClick",e.tracking.type,{details:Object.assign({phrase:e.completion.text},e.tracking)})}},{key:"sendRewriteClickEvent",value:function(e){this.sendEvent("suggestRewriteClick",e.completion.text,Object.assign({typedPhrase:this.store.inputPhrase?this.store.inputPhrase:null,searchPhrase:e.completion.text},e.tracking,{},this.store.tracking))}},{key:"sendModalViewEvent",value:function(){var e,t=this.targetWindow.location.hash;t===l.c?e="open":t!==l.c&&this.previousHash===l.c&&(e="close"),e&&(this.sendEvent("suggesterModalView",void 0,void 0,e),this.previousHash=t)}}]),e}();function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},k=/<|>|&|"|'/g,E=(RegExp(Array.from("javascript:",(function(e){return"".concat(e).concat("[\\n\\r\\t]*")})).join(""),"ig"),function(e){return S[e]}),O=function(){function e(t,n){Object(s.a)(this,e),this.$=t[0];for(var r=0;r<n.length;r++){var i=n[r];if(Array.isArray(i))for(var o=0;o<i.length;o++)this.$esc(i[o]);else this.$esc(i);this.$+=t[r+1]}}return Object(o.a)(e,[{key:"$esc",value:function(t){this.$+=t instanceof e?t.$:(t+"").replace(k,E)}},{key:"toString",value:function(){return this.$}}]),e}(),I=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new O(e,n)},j=n("ODXe"),w={"pl-PL":{"Kategoria i opcje wyszukiwania":[["",["Kategoria i opcje wyszukiwania"]]],"Wszystkie kategorie":[["",["Wszystkie kategorie"]]],"Zakończone":[["",["Zakończone"]]],"Wszędzie":[["",["Wszędzie"]]],"Użytkownicy":[["",["Użytkownicy"]]],Kategorie:[["",["Kategorie"]]],"Inne opcje":[["",["Inne opcje"]]],"Organizacje charytatywne":[["",["Organizacje charytatywne"]]],"Cele charytatywne":[["",["Cele charytatywne"]]],"czego szukasz?":[["",["czego szukasz?"]]],szukaj:[["",["szukaj"]]],"USUŃ":[["",["Usuń podpowiedź z histori"]]],"Cofnij do widoku strony":[["",["Cofnij do widoku strony"]]],"szukaj wielu":[["",["szukaj wielu"]]],Anuluj:[["",["Anuluj"]]]}},L=/({{[^}]+}}|{%[^%}]+%})/g,_=/({{[^}]+}})/g,C=/({%[^%}]+%})/g,N=/({{\s*|\s*}}|{%\s*|\s*%})/g;function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e)throw Error("Translation has to be an array");return e.find((function(e){return e[0]===t}))[1]}var A,P,T=function(e,t,n){var r=w["pl-PL"][e];if(!r)throw Error('Missing translation for lang "pl-PL" and key "'.concat(e,'"'));return t?function(e,t,n){var r=x(e,t.context);if(parseInt(t.count,10)>=0)r=function(e,t){var n=1!=t;return"boolean"!=typeof n?e[n]:e[n?1:0]}(r,t.count);else{var i=r;r=Object(j.a)(i,1)[0]}return function(e,t,n){if(n){var r=0;return e.split(L).map((function(n){if(n.match(C)){var i=t.formatters[r];if(i)return r+=1,i(n.replace(N,""));throw Error('Missing translation formatter for "'.concat(e,'"'))}return n.match(_)?t[n.replace(N,"")]:n}))}var i=e.match(L),s=0;return i?i.reduce((function(n,r){var i=r.replace(N,"");if(r.match(C)){var o=t.formatters[s];if(o)return s+=1,n.replace(r,o(i));throw Error('Missing translation formatter for "'.concat(e,'"'))}return r.match(_)?n.replace(r,t[i]):n}),e):e}(r,t,n)}(r,t,n):x(r)[0]},U=function(){function e(t,n,r){Object(s.a)(this,e),Object(a.a)(this,"stateUnbinders",[]),this.store=n,this.dropdownToggleNode=t.querySelector(h.b),this.selectedOptionNode=t.querySelector(h.c),this.filtersList=r.filters.list}return Object(o.a)(e,[{key:"mount",value:function(){this.addStateListeners(),this.addEventListeners(),this.updateSelectedFilter(this.dropdownToggleNode)}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners()}},{key:"addEventListeners",value:function(){this.dropdownToggleNode.addEventListener(d.b,this)}},{key:"removeEventListeners",value:function(){this.dropdownToggleNode.removeEventListener(d.b,this)}},{key:"addStateListeners",value:function(){var e=this;this.stateUnbinders.push(this.store.on(f.a.SelectedFilterIndex,(function(t){return e.handleSelectedFilterIndexChange(t)})))}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===d.b&&this.onChange(e)}},{key:"handleSelectedFilterIndexChange",value:function(e){var t,n,r=e.selectedFilterIndex,i=null!==(t=this.filtersList[r])&&void 0!==t?t:this.filtersList[0];this.selectedOptionNode.innerHTML=(n=i.name)?T("Wszystkie kategorie")===n?I(A||(A=b(['<span class="','">','</span><span class="','">',"</span>"])),"mpof_z0 mpof_5r_x",T("Wszędzie"),"mpof_5r mpof_z0_x",n):I(P||(P=b(["",""])),n):""}},{key:"onChange",value:function(e){var t=e.target;this.updateSelectedFilter(t)}},{key:"updateSelectedFilter",value:function(e){var t=e.value,n=this.filtersList.findIndex((function(e){return e.url===t}));Object(v.r)(this.store,n)}}]),e}(),R=n("a0sk"),G=["p","us_id","string","description","show-raty0-disclaimer","fromCart"],B=function(e,t){return t.some((function(t){return r=e,(n=t).key===r.key&&n.value===r.value;var n,r}))},F=function(e,t){return B(t,e)?e:[].concat(Object(u.a)(e),[t])},z=function(e){return[e.key,e.value].map(encodeURIComponent).join("=")},D=function(e){return function(t){return!B(t,e)}},M=function(e){return function(t){return!e.includes(t.key)}},q=function(e){var t=new URLSearchParams(e);return Array.from(t).filter((function(e){var t=Object(j.a)(e,2),n=t[0],r=t[1];return n&&r})).map((function(e){var t=Object(j.a)(e,2);return{key:t[0],value:t[1]}}))},W=function(e){var t=e.value;return""!==t&&void 0!==t},H=function(e){return Object.entries(e).map((function(e){var t=Object(j.a)(e,2),n=t[0],r=t[1];return z({key:n,value:r})})).join("&")},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.includes(window.location.pathname)&&!e.includes("/listing"),i=r?q(window.location.search):[],s=i.filter(M(G)).concat(t).filter(D(n)).reduce(F,[]).filter(W).map(z).join("&"),o=e.includes("?")?"&":"?";return"".concat(e).concat(s?o:"").concat(s)},V=[R.a,R.g,R.h,R.i],Y=function(){function e(t,n,r){Object(s.a)(this,e),Object(a.a)(this,"stateUnbinders",[]),this.baseNode=t,this.store=n,this.props=r,this.searchFormNode=t.querySelector(h.m),this.multisearchButtonWrapperNode=t.querySelector(h.h),this.multisearchButtonNode=t.querySelector(h.g)}return Object(o.a)(e,[{key:"mount",value:function(){this.addEventListeners(),this.addStateListeners()}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners()}},{key:"addEventListeners",value:function(){this.multisearchButtonNode&&this.multisearchButtonNode.addEventListener(d.c,this),this.searchFormNode.addEventListener(d.k,this)}},{key:"removeEventListeners",value:function(){this.multisearchButtonNode&&this.multisearchButtonNode.removeEventListener(d.c,this),this.searchFormNode.removeEventListener(d.k,this)}},{key:"addStateListeners",value:function(){var e=this;this.stateUnbinders.push(this.store.on(f.a.InputPhrase,(function(t){return e.handleInputPhraseChange(t)})))}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===d.k&&this.onSubmit(e),e.type===d.c&&this.onMultisearchClick(e)}},{key:"handleInputPhraseChange",value:function(e){var t=e.inputPhrase;this.multisearchButtonWrapperNode&&Object(v.l)(this.multisearchButtonWrapperNode,0===t.length)}},{key:"onMultisearchClick",value:function(e){e.preventDefault(),Object(v.o)(e.target.hash)}},{key:"onSubmit",value:function(e){var t;e.preventDefault();var n=this.store.inputPhrase.trim(),r=null!==(t=this.props.filters.list[this.store.selectedFilterIndex])&&void 0!==t?t:{};if(n||!Object(v.d)(V,this.store,this.props)||-1!==this.store.activeSuggestionIndex){var i,s=Object(v.c)(this.props.advancedSearchCriterias,this.store.checkedAdvancedSearchCriteriaIds),o=Object(j.a)(s,2),a=o[0],h=o[1],d=[].concat(Object(u.a)(a),Object(u.a)(this.props.staticQueryParameters)),l=h;-1!==this.store.activeSuggestionIndex?i=this.store.suggestions.filter(c)[this.store.activeSuggestionIndex].path:r.url?r.type===R.i?i="".concat(r.url,"/").concat(n):(i=r.url,d.unshift({key:"string",value:n})):(i="/listing",d.unshift({key:"string",value:n}));var f=K(i,d,l);window.document.location.assign(f)}}}]),e}(),Q=n("8R+5"),$=n("QUfp"),Z=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(Q.a)();Object(s.a)(this,e),Object(a.a)(this,"stateUnbinders",[]),Object(a.a)(this,"onStateInputPhrase",(function(e){var t=e.inputPhrase;r.clearInputButtonNode&&Object(v.l)(r.clearInputButtonNode,0!==t.length)})),Object(a.a)(this,"onStateNextPhrase",(function(e){var t=e.nextPhrase;r.updateSearchInputValue(t)})),Object(a.a)(this,"focusNode",(function(){r.searchInputNode.focus()})),Object(a.a)(this,"onClearInputClick",(function(){r.focusNode(),r.updateSearchInputValue("")})),Object(a.a)(this,"handleOnKeydown",(function(e){var t={ArrowDown:r.onArrowDownPressAndEmit,ArrowUp:r.onArrowUpPressAndEmit,Escape:r.onEscapePressAndEmit,Delete:r.emitOnDeletePress,Tab:r.emitOnTabPress}[e.key];t&&t(e)})),Object(a.a)(this,"emitOnInput",(function(e){return r.emitter.emit($.c,e)})),Object(a.a)(this,"onBlurAndEmit",(function(){r.emitter.emit($.a)})),Object(a.a)(this,"emitOnClick",(function(){return r.emitter.emit($.b)})),Object(a.a)(this,"onArrowDownPressAndEmit",(function(e){e.preventDefault(),r.emitter.emit($.d)})),Object(a.a)(this,"onArrowUpPressAndEmit",(function(e){e.preventDefault(),r.emitter.emit($.e)})),Object(a.a)(this,"emitOnTabPress",(function(){return r.emitter.emit($.h)})),Object(a.a)(this,"emitOnDeletePress",(function(){return r.emitter.emit($.f)})),Object(a.a)(this,"onEscapePressAndEmit",(function(){r.updateSearchInputValue(""),r.emitter.emit($.g)})),this.baseNode=t,this.store=n,this.emitter=i,this.searchInputNode=t.querySelector(h.n),this.clearInputButtonNode=t.querySelector(h.i)}return Object(o.a)(e,[{key:"mount",value:function(){this.addEventListeners(),this.addStateListeners()}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners()}},{key:"onUpdate",value:function(e){var t=e.inputPhrase,n=void 0===t?"":t;this.updateSearchInputValue(n)}},{key:"addEventListeners",value:function(){this.searchInputNode.addEventListener(d.a,this),this.searchInputNode.addEventListener(d.c,this),this.searchInputNode.addEventListener(d.g,this),this.searchInputNode.addEventListener(d.h,this),this.clearInputButtonNode&&this.clearInputButtonNode.addEventListener(d.c,this)}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on(f.a.InputPhrase,this.onStateInputPhrase),this.store.on(f.a.NextPhrase,this.onStateNextPhrase))}},{key:"removeEventListeners",value:function(){this.searchInputNode.removeEventListener(d.a,this),this.searchInputNode.removeEventListener(d.c,this),this.searchInputNode.removeEventListener(d.g,this),this.searchInputNode.removeEventListener(d.h,this),this.clearInputButtonNode&&this.clearInputButtonNode.removeEventListener(d.c,this)}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){var t=e.type,n=e.currentTarget;if(t===d.a&&this.onBlurAndEmit(),t===d.c&&(n===this.searchInputNode&&this.emitOnClick(),n===this.clearInputButtonNode&&this.onClearInputClick()),t===d.g){var r=n.value.trim();this.emitOnInput(r),Object(v.p)(this.store,r)}t===d.h&&this.handleOnKeydown(e)}},{key:"updateSearchInputValue",value:function(e){this.searchInputNode.value=e,Object(v.p)(this.store,e)}}]),e}(),X=n("o0o1"),J=n.n(X);function ee(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){ee(s,r,i,o,a,"next",e)}function a(e){ee(s,r,i,o,a,"throw",e)}o(void 0)}))}}var ne,re=n("/ZMk");function ie(){return I(ne||(ne=b(['<hr class="','" />'])),"_d7szm")}var se,oe,ae,ue=n("dtw6");function ce(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ce(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var he,de,le=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=ce(e))&&(r&&(r+=" "),r+=t);return r},fe=n("BoSU"),ve="mp7g_f6 mq1m_0 mnjl_0 mg9e_0 mvrt_0 mj7a_0 mh36_0 _535b5_2be85",ge="mp7g_oh mpof_ki mg9e_8 mj7a_8 mvrt_16 mj9z_5r mgmw_og _535b5_3IvOG";function pe(e){var t=e.content,n=e.type,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return I(he||(he=b(['<span data-type="','" class="','">',"</span>"])),n,r,t)}function me(e){switch(e.type){case"NORMAL":return pe(e);case"STRONG":return pe(e,fe.g);case"PRIMARY":return pe(e,fe.d);case"SECONDARY":return pe(e,fe.c);default:return""}}function ye(e){var t=e.buttonClassName,n=e.iconClassName,r=e.icon,i=e.dataRole;return I(de||(de=b(['<button tabindex="-1" aria-hidden="true" type="button" class="','" data-role="','"><img class="','" src="','" alt="" /></button>'])),le("_13q9y",t),i,le("mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 mg9e_4 mvrt_4 mj7a_4 mh36_4 isflp m7er_40",n),r)}var be,Se,ke,Ee,Oe,Ie=n("GI1G"),je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 8*e+8};function we(e,t){var n,r=e.history,i=e.completion;return r.removable?(n=t.enableSuggestionRemovalButtonOnHover,ye({icon:Ie.b,buttonClassName:le(ve,n&&"mpof_5r _535b5_2ibzC"),dataRole:ue.k})):i.enabled&&t.enableRewriteSuggestionButton?ye({icon:Ie.a,iconClassName:"_535b5_2igLu",buttonClassName:ve,dataRole:ue.l}):""}var Le=function(){function e(t,n,r){var i=this;Object(s.a)(this,e),Object(a.a)(this,"stateUnbinders",[]),Object(a.a)(this,"onCheckedAdvancedSearchCriteriaIds",(function(e){var t=e.checkedAdvancedSearchCriteriaIds;i.inputElement.checked=t.includes(i.item.id)})),this.baseNode=t,this.item=n,this.store=r,this.inputElement=t.querySelector("input"),this.labelElement=t.querySelector("label")}return Object(o.a)(e,[{key:"mount",value:function(){this.addEventListeners(),this.addStateListeners()}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeStateListeners()}},{key:"addEventListeners",value:function(){this.labelElement.addEventListener(d.c,this)}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on(f.a.CheckedAdvancedSearchCriteriaIds,this.onCheckedAdvancedSearchCriteriaIds))}},{key:"removeEventListeners",value:function(){this.labelElement.removeEventListener(d.c,this)}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===d.c&&this.onClick(e)}},{key:"onClick",value:function(e){var t=this;e.preventDefault();var n=this.store.checkedAdvancedSearchCriteriaIds,r=this.inputElement.checked?n.filter((function(e){return e!==t.item.id})):[].concat(Object(u.a)(n),[this.item.id]);Object(v.n)(this.store,r)}}]),e}(),_e=function(){return window.opbox.edge};function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e();return t.get("/suggest/web/suggestions?".concat(H(e)),{withCredentials:!0,cancelLast:!0})}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e();return t.delete("/suggest/history/".concat(e),{withCredentials:!0,disableDefaultHeaders:!0})}var xe=function(){function e(t,n,r,i){Object(s.a)(this,e),this.anchorNode=t,this.store=n,this.suggestion=r,this.emitter=i,this.rewriteButtonNode=t.querySelector(h.k),this.removeButtonNode=t.querySelector(h.j)}return Object(o.a)(e,[{key:"mount",value:function(){this.addEventListeners()}},{key:"unmount",value:function(){this.removeEventListeners()}},{key:"addEventListeners",value:function(){this.anchorNode.addEventListener(d.c,this),this.removeButtonNode&&this.removeButtonNode.addEventListener(d.c,this),this.rewriteButtonNode&&this.rewriteButtonNode.addEventListener(d.c,this)}},{key:"removeEventListeners",value:function(){this.anchorNode.removeEventListener(d.c,this),this.removeButtonNode&&this.removeButtonNode.removeEventListener(d.c,this),this.rewriteButtonNode&&this.rewriteButtonNode.removeEventListener(d.c,this)}},{key:"handleEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget===this.anchorNode&&this.onItemClick(),e.currentTarget===this.removeButtonNode&&this.onRemoveButtonClick(),e.currentTarget===this.rewriteButtonNode&&this.onRewriteButtonClick()}},{key:"onItemClick",value:function(){this.emitter.emit("CLICK_SUGGESTION",this.suggestion)}},{key:"onRemoveButtonClick",value:function(){this.emitter.emit("CLICK_REMOVE_SUGGESTION",this.suggestion)}},{key:"onRewriteButtonClick",value:function(){this.emitter.emit("CLICK_REWRITE_SUGGESTION",this.suggestion)}},{key:"markActive",value:function(){this.anchorNode.setAttribute("aria-selected","true"),Object(v.q)(this.store,this.suggestion.completion.text)}},{key:"markInactive",value:function(){this.anchorNode.removeAttribute("aria-selected")}}]),e}(),Ae=[R.b,R.g,R.h,R.j,R.e],Pe=[R.b,R.g,R.e],Te=[R.j],Ue=[R.i,R.c,R.e,R.f];function Re(e){switch(e){case R.i:return"sellers";case R.f:return"charity-organizations";case R.c:case R.e:return"fundraising-campaigns";default:return"all"}}function Ge(e,t){var n=t.filters.list[e.selectedFilterIndex];if(!Object(re.a)(n))return{};var r=n.type,i=n.id,s=n.name,o=Ae.includes(r),a=Pe.includes(r),u=Te.includes(r),c=Ue.includes(r);return Object.assign({},o?{scope:"CHARITY_ORGANIZATION"===r?"charity-organization":r.toLowerCase()}:{},{},a?{"scope-value":i}:{},{},u?{"scope-value":s}:{},{},c?{types:Re(r)}:{})}var Be=function(){function e(t,n,r,i){var o=this,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(Q.a)(),l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:window;Object(s.a)(this,e),Object(a.a)(this,"isExpanded",!1),Object(a.a)(this,"suggestionItems",[]),Object(a.a)(this,"advancedSearchCriteriaItems",[]),Object(a.a)(this,"stateUnbinders",[]),Object(a.a)(this,"suggesterUnbinders",[]),Object(a.a)(this,"searchInputUnbinders",[]),Object(a.a)(this,"onStateSuggestions",(function(){o.render()})),Object(a.a)(this,"onSearchInputBlur",(function(){o.store.activeSuggestionIndex=-1})),Object(a.a)(this,"onSearchInputClick",(function(){o.props.enableFullscreen?o.fetch():o.toggle()})),Object(a.a)(this,"onSearchInput",(function(e){o.fetch(e)})),Object(a.a)(this,"onSearchInputTabPress",(function(){o.destroy()})),Object(a.a)(this,"onSearchInputEscapePress",(function(){o.destroy()})),Object(a.a)(this,"onSearchInputArrowUpPress",(function(){o.markPreviousSuggestion()})),Object(a.a)(this,"onSearchInputArrowDownPress",(function(){o.markNextSuggestion()})),Object(a.a)(this,"onSearchInputDeletePress",(function(){if(-1!==o.store.activeSuggestionIndex){var e=o.store.suggestions.filter(c)[o.store.activeSuggestionIndex];o.deleteSuggestion(e)}})),Object(a.a)(this,"fetch",te(J.a.mark((function e(){var t,n,r=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:o.store.inputPhrase,!Object(v.d)(v.a,o.store,o.props)&&!Object(v.k)(t,o.props)){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return n=Object.assign({phrase:t},Object(v.e)(t)?{"prefilled-count":"0"}:{},{},o.props.enableSuggesterHistory?{history:!0}:{},{},Ge(o.store,o.props)),o.props.enableCustomPerformanceMarks&&Object(v.g)(),e.abrupt("return",Ce(n).then((function(e){return o.props.enableCustomPerformanceMarks&&Object(v.i)(),e})).then((function(e){var t=e.status,n=e.data,r=n.suggestions,i=n.tracking;o.store.tracking=i,o.store.suggestions=r,o.store.activeSuggestionIndex=-1,o.emitter.emit("RECEIVE_SUGGESTIONS",t)})).catch((function(e){e&&0===e.status||(o.store.tracking={},o.store.suggestions=[],o.store.activeSuggestionIndex=-1,o.emitter.emit("RECEIVE_SUGGESTIONS",e&&e.status||e))})));case 6:case"end":return e.stop()}}),e)})))),Object(a.a)(this,"onToggleExpanded",(function(e){o.isExpanded=e})),Object(a.a)(this,"onClickSuggestion",(function(e){var t=Object(v.c)(o.props.advancedSearchCriterias,o.store.checkedAdvancedSearchCriteriaIds),n=Object(j.a)(t,2),r=n[0],i=n[1],s=[].concat(Object(u.a)(r),Object(u.a)(o.props.staticQueryParameters)),a=K(e.path,s,i);o.targetWindow.document.location.assign(a)})),Object(a.a)(this,"onClickRewriteSuggestion",(function(e){o.fetch(e.completion.text),Object(v.q)(o.store,e.completion.text)})),Object(a.a)(this,"onClickRemoveSuggestion",(function(e){o.deleteSuggestion(e)})),Object(a.a)(this,"deleteSuggestion",(function(e){var t=e.history,n=t.removable,r=t.id;n&&r&&Ne(r).then((function(e){var t=e.status;t>=200&&t<300&&o.fetch()})).catch(Function.prototype)})),this.baseNode=t,this.store=n,this.props=r,this.searchInput=i,this.emitter=d,this.targetWindow=l,this.suggesterNode=t.querySelector(h.o)}return Object(o.a)(e,[{key:"mount",value:function(){this.addStateListeners(),this.addSuggesterListeners(),this.addSearchInputListeners(),this.addGlobalEventListeners(),this.props.enableFullscreen&&this.targetWindow.location.hash===l.c&&this.fetch()}},{key:"unmount",value:function(){this.removeStateListeners(),this.removeSuggesterListeners(),this.removeSearchInputListeners(),this.removeGlobalEventListeners()}},{key:"onUpdate",value:function(e){var t=e.inputPhrase,n=void 0===t?"":t,r=e.advancedSearchCriterias,i=void 0===r?[]:r;""===n&&this.destroy(),Object(v.n)(this.store,i.filter((function(e){return e.checked})).map((function(e){return e.id})))}},{key:"addStateListeners",value:function(){this.stateUnbinders.push(this.store.on(f.a.Suggestions,this.onStateSuggestions))}},{key:"addSuggesterListeners",value:function(){this.suggesterUnbinders.push(this.emitter.on("TOGGLE_IS_EXPANDED",this.onToggleExpanded),this.emitter.on("CLICK_SUGGESTION",this.onClickSuggestion),this.emitter.on("CLICK_REWRITE_SUGGESTION",this.onClickRewriteSuggestion),this.emitter.on("CLICK_REMOVE_SUGGESTION",this.onClickRemoveSuggestion))}},{key:"addSearchInputListeners",value:function(){this.searchInputUnbinders.push(this.searchInput.emitter.on($.a,this.onSearchInputBlur),this.searchInput.emitter.on($.b,this.onSearchInputClick),this.searchInput.emitter.on($.c,this.onSearchInput),this.searchInput.emitter.on($.h,this.onSearchInputTabPress),this.searchInput.emitter.on($.g,this.onSearchInputEscapePress),this.searchInput.emitter.on($.e,this.onSearchInputArrowUpPress),this.searchInput.emitter.on($.d,this.onSearchInputArrowDownPress),this.searchInput.emitter.on($.f,this.onSearchInputDeletePress))}},{key:"addGlobalEventListeners",value:function(){this.props.enableFullscreen||this.targetWindow.addEventListener(d.c,this)}},{key:"removeGlobalEventListeners",value:function(){this.props.enableFullscreen||this.targetWindow.removeEventListener(d.c,this)}},{key:"removeStateListeners",value:function(){this.stateUnbinders.forEach((function(e){return e()}))}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"removeSearchInputListeners",value:function(){this.searchInputUnbinders.forEach((function(e){return e()}))}},{key:"handleEvent",value:function(e){e.type===d.c&&this.onGlobalClick(e)}},{key:"toggle",value:function(){this.isExpanded?this.destroy():this.fetch()}},{key:"render",value:function(){var e,t;this.unmountSuggestions(),this.unmountAdvancedSearchCriteria(),this.suggesterNode.innerHTML=(e=this.props,t=this.store,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.length?new O([""].concat(Object(u.a)(Array(e.length-1).fill(t)),[""]),e):""}([e.enableFullscreen?ie():""].concat(Object(u.a)(t.suggestions.map((function(t){return function(e,t){switch(e.componentType){case"LABEL":return n=e.labelItems,I(be||(be=b(['<div data-role="','" class="','" style="padding-left: ','px"><div class="','">',"</div></div>"])),ue.d,"mp7g_oh mpof_ki mg9e_8 mj7a_8 mvrt_16 mj9z_5r mgmw_og",je(),"meqh_en m7er_k4 _535b5_28vwO",n.map(me));case"SUGGESTION":return function(e,t){var n=e.path,r=e.depth,i=e.labelItems;return I(Se||(Se=b(['<a role="option" href="','" class="','" data-role="','" style="padding-left: ','px">','<div class="','">',"</div></a>"])),n,ge,ue.q,je(r),we(e,t),"meqh_en m7er_k4 _535b5_28vwO",i.map(me))}(e,t);case"SUGGESTION_WITH_IMAGE":return function(e,t){var n=e.path,r=e.image,i=e.depth,s=e.labelItems,o=e.suggestionType,a=e.sublabelItems,u="AD"!==o,c=a.length?I(ke||(ke=b(["<div>","</div>"])),a.map(me)):"",h=r.source?I(Ee||(Ee=b(['<img alt="','" src="','" class="','" />'])),r.alt,r.source,le(fe.h,u&&"_535b5_eCMuA")):"";return I(Oe||(Oe=b(['<a role="option" href="','" class="','" style="padding-left: ','px" data-role="','">'," ",'<div class="','"><div>',"</div>","</div></a>"])),n,le(ge,"mp7g_oh mpof_ki mg9e_8 mj7a_8 mvrt_16 mj9z_5r mgmw_og m389_6m"),je(i),ue.r,h,we(e,t),"m7er_k4 _535b5_3x_6Q",s.map(me),c)}(e,t);default:return""}var n}(t,e)}))),Object(u.a)(function(e,t){return Object(v.b)(t,e)?[]:[t.suggestions.length?ie():"",e.advancedSearchCriterias.map((function(e){return function(e,t){var n=e.id,r=e.label,i=e.badge,s="searchInDescriptionChange"===n;return I(oe||(oe=b(['<div data-role="','" class="','"><input type="checkbox" autocomplete="off" id="','" class="','" ',' /><label for="','" class="','">'," ","</label></div>"])),ue.a,s?"mpof_5r mpof_z0_s":"",n,"_1wmuz _con24 _11cms",t.checkedAdvancedSearchCriteriaIds.includes(n)?I(ae||(ae=b(["checked"]))):"",n,"_u2xi2 munh_8",r,function(e){if(!e)return"";var t=e.textColor,n=e.backgroundColor,r=e.text;return I(se||(se=b(['<span class="','" style="color: ',"; background-color: ",';">',"</span>"])),"msbw_2 mldj_2 mtag_2 mm2b_2 mvrt_4 mh36_4 mqu1_16 mgmw_9u msa3_z4 mj9z_5r mp0t_ji mgn2_12 mg9e_2 mj7a_2",t,n,r)}(i))}(e,t)}))]}(e,t))),"")).toString(),this.mountSuggestions(),this.mountAdvancedSearchCriteria(),this.markSuggesterAccordingly(),this.props.enableCustomPerformanceMarks&&Object(v.h)()}},{key:"destroy",value:function(){this.unmountSuggestions(),this.unmountAdvancedSearchCriteria(),this.markSuggesterInactive(),this.suggesterNode.innerHTML=""}},{key:"markSuggestionByStepOf",value:function(e){var t=this.suggestionItems.length;if(0!==t){var n=this.store.activeSuggestionIndex,r=((Math.max(n,1===e?-1:0)+e)%t+t)%t;this.toggleActiveSuggestions(n,r),Object(v.m)(this.store,r)}}},{key:"markPreviousSuggestion",value:function(){this.markSuggestionByStepOf(-1)}},{key:"markNextSuggestion",value:function(){this.markSuggestionByStepOf(1)}},{key:"toggleActiveSuggestions",value:function(e,t){-1!==e&&this.suggestionItems[e].markInactive(),this.suggestionItems[t].markActive()}},{key:"mountSuggestions",value:function(){var e=this,t=this.suggesterNode.childNodes;Array.from(t).filter((function(e){return"A"===e.nodeName})).forEach((function(t,n){var r=e.store.suggestions.filter(c)[n],i=new xe(t,e.store,r,e.emitter);i.mount(),e.suggestionItems.push(i)}))}},{key:"mountAdvancedSearchCriteria",value:function(){var e=this;this.suggesterNode.querySelectorAll(h.a).forEach((function(t,n){var r=new Le(t,e.props.advancedSearchCriterias[n],e.store);r.mount(),e.advancedSearchCriteriaItems.push(r)}))}},{key:"unmountSuggestions",value:function(){this.suggestionItems.forEach((function(e){return e.unmount()})),this.suggestionItems=[]}},{key:"unmountAdvancedSearchCriteria",value:function(){this.advancedSearchCriteriaItems.forEach((function(e){return e.unmount()})),this.advancedSearchCriteriaItems=[]}},{key:"markSuggesterAccordingly",value:function(){0===this.store.suggestions.length&&Object(v.b)(this.store,this.props)?this.markSuggesterInactive():this.isExpanded||this.markSuggesterActive()}},{key:"markSuggesterActive",value:function(){this.suggesterNode.setAttribute("aria-expanded","true"),this.emitter.emit("TOGGLE_IS_EXPANDED",!0)}},{key:"markSuggesterInactive",value:function(){this.suggesterNode.setAttribute("aria-expanded","false"),this.emitter.emit("TOGGLE_IS_EXPANDED",!1)}},{key:"onGlobalClick",value:function(e){this.isExpanded&&null===e.target.closest(h.o)&&this.destroy()}}]),e}(),Fe=function(){function e(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.localStorage;Object(s.a)(this,e),Object(a.a)(this,"suggesterUnbinders",[]),Object(a.a)(this,"onSubmit",(function(){var e=i.store,t=e.activeSuggestionIndex,n=e.suggestions;if(-1===t)i.saveEntryFromStore();else{var r=n.filter(c)[t];i.saveEntryFromSuggestion(r)}})),Object(a.a)(this,"onSuggesterClickSuggestion",(function(e){i.saveEntryFromSuggestion(e)})),Object(a.a)(this,"getFilterScopeData",(function(){var e=i.props.filters.list[i.store.selectedFilterIndex];return{scope:e.type,scopeValue:e.type===R.j?e.name:e.id}})),Object(a.a)(this,"saveEntryFromSuggestion",(function(e){if(e.history.save){var t=Object.assign({phrase:e.history.suggestedText,id:e.history.id,objectId:e.objectId,type:e.suggestionType},i.getFilterScopeData());i.saveEntry(t)}})),this.baseNode=t,this.store=n,this.props=r,this.localStorage=o,this.searchFormNode=t.querySelector(h.m)}return Object(o.a)(e,[{key:"mount",value:function(e){this.postHistoryEntry(),this.addEventListeners(),this.addSuggesterListeners(e)}},{key:"unmount",value:function(){this.removeEventListeners(),this.removeSuggesterListeners()}},{key:"addSuggesterListeners",value:function(e){this.suggesterUnbinders.push(e.on("CLICK_SUGGESTION",this.onSuggesterClickSuggestion))}},{key:"addEventListeners",value:function(){this.searchFormNode.addEventListener(d.k,this)}},{key:"removeSuggesterListeners",value:function(){this.suggesterUnbinders.forEach((function(e){return e()}))}},{key:"removeEventListeners",value:function(){this.searchFormNode.removeEventListener(d.k,this)}},{key:"handleEvent",value:function(e){e.type===d.k&&this.onSubmit()}},{key:"saveEntryFromStore",value:function(){var e=Object.assign({type:"PHRASE",phrase:decodeURIComponent(this.store.inputPhrase)},this.getFilterScopeData());this.saveEntry(e)}},{key:"saveEntry",value:function(e){e.phrase&&e.scope&&e.type&&this.localStorage.setItem("opbox-search-history",JSON.stringify(e))}},{key:"getEntry",value:function(){return JSON.parse(this.localStorage.getItem("opbox-search-history")||"null")}},{key:"removeEntry",value:function(){this.localStorage.removeItem("opbox-search-history")}},{key:"postHistoryEntry",value:function(){var e=this,t=this.getEntry();t&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e();return t.post("/suggest/history",e,{withCredentials:!0})}(t).then((function(){return e.removeEntry()}))}}]),e}(),ze=function(){function e(t){var n=this,r=t.baseNode,i=t.props;Object(s.a)(this,e),Object(a.a)(this,"onUpdate",(function(e){n.searchInput.onUpdate(e),n.suggester.onUpdate(e)})),this.baseNode=r,this.props=i,this.store=new f.b(i),this.searchInput=new Z(r,this.store),this.searchForm=new Y(r,this.store,i),this.suggester=new Be(r,this.store,i,this.searchInput),this.filters=new U(r,this.store,i),i.enableSuggesterHistory&&(this.history=new Fe(r,this.store,i)),this.analyticsDispatcher=new y(r,this.store,i)}return Object(o.a)(e,[{key:"onMount",value:function(){var e=this;this.analyticsDispatcher.mount(this.suggester.emitter),this.props.enableSuggesterHistory&&this.history.mount(this.suggester.emitter),this.props.enableFullscreen&&n.e(1).then(n.bind(null,"W0AY")).then((function(t){var n=t.Modal;e.modal=new n(e.baseNode,e.store,e.props,e.searchInput),e.modal.mount()})),this.searchInput.mount(),this.searchForm.mount(),this.filters.mount(),this.suggester.mount()}},{key:"onUnmount",value:function(){this.analyticsDispatcher.unmount(),this.props.enableSuggesterHistory&&this.history.unmount(),this.props.enableFullscreen&&this.modal&&this.modal.unmount(),this.searchInput.unmount(),this.searchForm.unmount(),this.filters.unmount(),this.suggester.unmount()}}]),e}();window.opbox.component.register({prototypeName:"allegro.metrumHeader.search",clientImplementationVersion:i.a},ze)},a0sk:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return o})),n.d(t,"j",(function(){return a})),n.d(t,"i",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return l}));var r="ALL",i="CATEGORY",s="DEPARTMENT",o="ENDED",a="USER_NAME",u="USERS",c="CHARITY_GOALS",h="CHARITY_GOAL_OFFERS",d="CHARITY_ORGANIZATION",l="CHARITY_ORGANIZATIONS"},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},dtw6:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return c})),n.d(t,"n",(function(){return h})),n.d(t,"m",(function(){return d})),n.d(t,"o",(function(){return l})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return v})),n.d(t,"r",(function(){return g})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return S}));var r="advanced-search-criteria",i="filters-dropdown-toggle",s="filters-selected-option",o="label",a="remove-query",u="remove-recently-searched",c="rewrite-recently-searched",h="search-form",d="search-button",l="search-input",f="suggester",v="suggestion",g="suggestion-with-image",p="multisearch-button",m="multisearch-button-wrapper",y="modal-search-layer",b="modal-search-container",S="modal-search-layer-return"},f6k1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return f}));var r="blur",i="change",s="click",o="focusin",a="focusout",u="hashchange",c="input",h="keydown",d="mousedown",l="resize",f="submit"},ls82:function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),o=new O(r||[]);return s._invoke=function(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),s}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h={};function d(){}function l(){}function f(){}var v={};a(v,i,(function(){return this}));var g=Object.getPrototypeOf,p=g&&g(g(I([])));p&&p!==t&&n.call(p,i)&&(v=p);var m=f.prototype=d.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,s){function o(){return new t((function(r,o){!function r(i,s,o,a){var u=c(e[i],e,s);if("throw"!==u.type){var h=u.arg,d=h.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(d).then((function(e){h.value=e,o(h)}),(function(e){return r("throw",e,o,a)}))}a(u.arg)}(i,s,r,o)}))}return r=r?r.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:j}}function j(){return{value:void 0,done:!0}}return l.prototype=f,a(m,"constructor",f),a(f,"constructor",l),l.displayName=a(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(b.prototype),a(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(m),a(m,o,"Generator"),a(m,i,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},o0o1:function(e,t,n){e.exports=n("ls82")},rRL6:function(e,t){e.exports="13a"},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},vuIU:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))}}));
//# sourceMappingURL=index-pl-PL_2bc45898.js.map