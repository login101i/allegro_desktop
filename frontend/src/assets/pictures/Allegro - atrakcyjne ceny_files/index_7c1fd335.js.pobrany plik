!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://assets.allegrostatic.com/opbox-notification-service/",n(n.s=0)}({0:function(e,t,n){e.exports=n("WdQY")},WdQY:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return s}));var i=n("kiQV"),a=[{locationHref:/moje-allegro\/sprzedaz\/centrum-znizek/,name:"bundles"},{locationHref:/my-allegro\/sales\/discount-center/,name:"bundles"},{locationHref:/moje-allegro\/zakupy\/monety/,name:"coins"},{locationHref:/opinie-produktowe\/dodaj-opinie/,name:"reviews"},{locationHref:/moje-allegro\/sprzedaz\/abonamenty/,name:"subscriptions"},{locationHref:/moje-allegro\/moje-konto\/centrum-wiadomosci\/wiadomosci/,name:"messageCenter"},{locationHref:/my-allegro\/my-account\/message-center\/messages/,name:"messageCenter"}],s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;o(this,e),r(this,"pages",a),r(this,"isRequestPending",!1),r(this,"listeners",[]);var n=t.opbox,i=n.edge,s=n.reportError,u=t.location.href;this.reportError=s,this.edge=i,this.locationHref=u}var t;return(t=[{key:"handleResponse",value:function(e){var t=this;return e.then((function(e){var n=e.data;return t.processResponseData(n)})).catch((function(e){e&&0!==e.status&&t.reportError(e)})).finally((function(){t.isRequestPending=!1}))}},{key:"processResponseData",value:function(e){this.values=e,this.listeners.forEach((function(t){t(e)}))}},{key:"requestNotifications",value:function(e){return this.isRequestPending=!0,this.edge.get(function(e){return"/notification-badges"+(e?"?origin=".concat(e):"")}(e),{headers:{},withCredentials:!0})}},{key:"getNotificationNameForCurrentPage",value:function(){var e=this,t=(this.pages.find((function(t){return t.locationHref.test(e.locationHref)}))||{}).name;return void 0===t?"":t}},{key:"fetchNotificationsForCurrentPage",value:function(){var e=this.getNotificationNameForCurrentPage(),t=this.requestNotifications(e);this.handleResponse(t)}},{key:"reset",value:function(e){var t=this.requestNotifications(e);return this.handleResponse(t)}},{key:"getNotifications",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"!=typeof e)throw Error("Callback is not a function!");this.listeners.push(e),this.isRequestPending||(this.values&&!t?e(this.values):this.fetchNotificationsForCurrentPage())}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t),e}();window.opbox.services.register({serviceName:i.a},s)},kiQV:function(e){e.exports=JSON.parse('{"a":"opbox-notification-service"}')}}));
//# sourceMappingURL=index_7c1fd335.js.map