((e,t)=>{for(var s in t)e[s]=t[s]})(window,(e=>{var t={};function s(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=(e,t,a)=>{s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=(e,t)=>{if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,(t=>e[t]).bind(null,r));return a},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,"a",t),t},s.o=(e,t)=>({}.hasOwnProperty.call(e,t)),s.p="https://assets.allegrostatic.com/sc-11656/",s(s.s=0)})({0(e,t,s){e.exports=s("O14P")},O14P(e,t,s){s.r(t);const a={withCredentials:!0,headers:{Accept:"application/vnd.allegro.internal.v1+json"}};class r{constructor(e){const{opbox:{edge:t}}=e;this.edge=t}getThreads(){return this.edge.get("/message-center/threads?limit=10",a)}}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},o=/<|>|&|"|'/g,i=(RegExp(Array.from("javascript:",e=>e+"[\\n\\r\\t]*").join(""),"ig"),e=>m[e]);class l{constructor(e,t){this.$=e[0];for(let s=0;s<t.length;s++){const a=t[s];if(Array.isArray(a))for(let e=0;e<a.length;e++)this.$esc(a[e]);else this.$esc(a);this.$+=e[s+1]}}$esc(e){this.$+=e instanceof l?e.$:(e+"").replace(o,i)}toString(){return this.$}}var _=(e,...t)=>new l(e,t),c=s("R0yb"),u=s.n(c);const d={"pl-PL":{"log in to see your messages":[["",["Zaloguj się, aby zobaczyć swoje wiadomości."]]],"log in":[["",["Zaloguj"]]],"show all":[["",["Pokaż wszystkie"]]],"open message center":[["",["Otwórz Centrum Wiadomości"]]],"you have no message":[["",["Nie masz wiadomości"]]],"in the message center, you'll see your conversations with sellers about their offers, delivery time and product availability.":[["",["W Centrum Wiadomości zobaczysz swoje rozmowy ze sprzedawcami na temat ich ofert, czasu dostawy oraz dostępności produktów."]]],"something went wrong...":[["",["Coś poszło nie tak..."]]],"unfortunately we could not view your messages.":[["",["Niestety nie mogliśmy wyświetlić Twoich wiadomości."]]],from:[["",["od"]]],to:[["",["do"]]],"Do you have a moment?":[["",["Masz chwilę?"]]],"Help us improve the Message Center":[["",["Pomóż ulepszać Centrum Wiadomości"]]]}},h=/({{[^}]+}}|{%[^%}]+%})/g,p=/({{[^}]+}})/g,g=/({%[^%}]+%})/g,y=/({{\s*|\s*}}|{%\s*|\s*%})/g;function f(e,t=""){if("string"==typeof e)throw Error("Translation has to be an array");return e.find(e=>e[0]===t)[1]}const v=(e,t,s)=>{const a=d["pl-PL"][e];if(!a)throw Error(`Missing translation for lang "pl-PL" and key "${e}"`);return t?((e,t,s)=>{let a=f(e,t.context);return parseInt(t.count,10)>=0?a=((e,t)=>{const s=1==(a=t)?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2;var a;return"boolean"!=typeof s?e[s]:e[s?1:0]})(a,t.count):[a]=a,((e,t,s)=>{if(s){let s=0;return e.split(h).map(a=>{if(a.match(g)){const r=t.formatters[s];if(r)return s+=1,r(a.replace(y,""));throw Error(`Missing translation formatter for "${e}"`)}return a.match(p)?t[a.replace(y,"")]:a})}const a=e.match(h);let r=0;return a?a.reduce((s,a)=>{const n=a.replace(y,"");if(a.match(g)){const m=t.formatters[r];if(m)return r+=1,s.replace(a,m(n));throw Error(`Missing translation formatter for "${e}"`)}return a.match(p)?s.replace(a,t[n]):s},e):e})(a,t,s)})(a,t,s):f(a)[0]};var w=s("dP7j"),b="mpof_ki myre_zn m7f5_6m mse2_k4 mp7g_oh mg9e_16 mvrt_16 mj7a_16 mh36_16 mx4z_6m mzmg_6m",$="mgn2_14 mp0t_0a mqu1_21 mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 mgmw_ag",k="mp0t_ji m9qz_yo munh_0 m3h2_0 mp4t_0 mqu1_1j mgn2_19 mgn2_21_s mryx_8 mgmw_ag",z="mg9e_16 mvrt_16 mj7a_16 mh36_16 mpof_ki mx7m_1 mnyp_co mlkp_ag _7d0d9_1xMMb",j="mpof_92 m7f5_5x m389_5x m7er_k4 mp7g_oh mj9z_5r",x="m7er_k4 mzmg_6m mx7m_1 m911_co mlkp_ag mnyp_5r mdwl_5r mefy_5r",C="mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 b1la9 mjyo_6x mzmg_6m mj9z_5r mpof_vs mupj_5k mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp bgkgt m7er_k4 _7d0d9_TNvmu";let q,M,P,O,S,E,L,T,R,I,A,N=e=>e;const D=u()(null,"pl");function U(e){const t="/login/auth?origin_url="+encodeURIComponent(e.location);return _(q||(q=N`<div class="${0}"><p class="${0}">${0}</p><a href="${0}" class="${0}" rel="nofollow" data-role="login-button" data-analytics-clickable data-analytics-click-label="loginClick">${0}</a></div>`),"mzmg_6m mg9e_24 mj7a_24 m7er_k4 mx4z_6m",$,v("log in to see your messages"),t,"mgn2_14 mp0t_0a m9qz_yp mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 mjir_sv m2ha_2 m8qd_qh mjt1_n2 b1la9 mjyo_6x mzmg_6m mj9z_5r mpof_vs mupj_5k mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1g4y mp4t_16 _7d0d9_1kQmO",v("log in"))}class W{constructor(e,t,s,a,r){n(this,"onOpen",()=>{this.root.removeEventListener("inViewport",this.onOpen,!1),this.api.getThreads().then(this.onResponse).catch(this.onError)}),n(this,"onResponse",({data:e})=>{this.services&&this.services.get("opbox-notification-service").then(e=>e.reset("messageCenter"));const{displayMessageCenterSurvey:t}=this.parameters,s=this.filterEmptyThreads(e);0===s.threads.length?this.setContent((({messageCenterBasePath:e})=>_(I||(I=N`<div class="${0}"><div class="${0}"><p class="${0}">${0}</p><p class="${0}" data-role="no-messages-info">${0}</p></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),"mpof_ki myre_zn m7er_k4",b,k,v("you have no message"),$,v("in the message center, you'll see your conversations with sellers about their offers, delivery time and product availability."),x,C,e,v("open message center")))(this.parameters)):(this.setContent((({threads:e},{messageCenterBasePath:t,displayMessageCenterSurvey:s,messageCenterSurveyLink:a})=>{const r=((e,t,s,a)=>{const r=s?(e=>_(L||(L=N`<li class="${0} ${0}"><a href="${0}" class="${0}" data-role="survey-link" data-analytics-clickable data-analytics-click-label="surveyClick" data-analytics-click-value="1"><img src="${0}" class="${0}" alt=""/><span class="${0}"><span class="${0}">${0}</span><span class="${0}">${0}</span></span></a></li>`),z,"msts_my mgmw_9u",e,j,w.a,"mjyo_6x mse2_40 meqh_en msa3_z4 mhd5_0m ib0i1 m0s5_9u mg9e_0 mvrt_0 mj7a_0 mh36_0 _7d0d9_3mKg0","mp7g_f6 mq1m_0 mnjl_0 mqm6_0 _7d0d9_2r8wf","mgn2_14 mp0t_0a mqu1_21 mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 mgmw_9u m9qz_yq _7d0d9_1cWh5",v("Do you have a moment?"),"m6ax_n4 _7d0d9_rVH2j mpof_z0 mp4t_0 m3h2_0 mryx_0 munh_0 meqh_en mp0t_0a mli8_k4 mgn2_12 mqu1_16 msa3_z4 mgmw_9u",v("Help us improve the Message Center")))(a):"",n=e.filter(e=>null!==e.interlocutor).map((e,s)=>((e,t,s)=>{const{lastMessage:a}=e,r=a&&!a.author.isInterlocutor,n=e.lastMessage?e.lastMessage.text:_(S||(S=N`&nbsp;`));return _(E||(E=N`<li class="${0}"><a href="${0}/thread/${0}" class="${0}" data-role="show-single-button" data-analytics-clickable data-analytics-click-label="threadClick" data-analytics-click-value="click-thread-${0}">${0}<span class="${0}"><span class="${0} ${0}">${0}${0}</span><span class="${0}">${0}<span class="${0}">${0}</span></span></span></a></li>`),z,t,e.id,j,s,(e=>_(M||(M=N`<img class="${0}" src="${0}" alt="" />`),"_7d0d9_3mKg0 _7d0d9_39eFM",e.interlocutor.avatarUrl.replace("original","s128b")))(e),"mp7g_f6 mq1m_0 mnjl_0 mqm6_0 _7d0d9_2r8wf","mpof_z0 mgn2_14 mp0t_0a mqu1_21 mgmw_wo mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4 meqh_en m6ax_n4 _7d0d9_1cWh5",!1===e.read?"m9qz_yq":"",r?_(O||(O=N`<svg class="${0}" data-role="arrow-icon"><image xlink:href="https://assets.allegrostatic.com/metrum/icon/arrow-u-turn-b66cf828ae.svg" width="100%" height="100%"/></svg>`),"mupj_mm mse2_24 mjyo_6x _7d0d9_1lGUl"):"",n,"m7f5_sf mpof_ki m7er_k4 _7d0d9_2RrhG",(e=>{let t="z";const{lastMessage:s}=e;return s&&(t=s.author.isInterlocutor?v("from"):v("to")),_(P||(P=N`<span class="${0}">${0} ${0}</span>`),"m6ax_n4 _7d0d9_rVH2j mp0t_0a mli8_k4 mgn2_12 mqu1_16 mgmw_ag mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4 _7d0d9_2T4LR mpof_z0 meqh_en",t,e.interlocutor.login)})(e),"mp0t_0a mli8_k4 mgn2_12 mqu1_16 mgmw_ag mp4t_0 m3h2_0 mryx_0 munh_0 msa3_z4",D(new Date(e.lastMessageDateTime)))})(e,t,s));return _(T||(T=N`<ul class="${0}" data-role="threads-list">${0}${0}</ul>`),"mp4t_0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0",r,n.map(e=>new l([e+""],[])))})(e,t,s,a);return _(R||(R=N`<div class="${0}"><div class="${0}"><div class="${0}">${0}</div></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),"mpof_ki myre_zn m7er_k4","mse2_k4 mp7g_oh _7d0d9_3ELUB","mdwt_56 mp7g_f6 mq1m_0 mj7u_0 mnjl_0 mqm6_0 meqh_en",r,x,C,t,v("show all"))})(s,this.parameters)),t&&this.addMessageCenterSurveyClickEventListener())}),n(this,"onError",({status:e})=>{const t=401===e?U(this.window):(({messageCenterBasePath:e})=>_(A||(A=N`<div class="${0}"><div class="${0}"><p class="${0}">${0}</p><p class="${0}" data-role="error-info" data-analytics-enabled data-item data-analytics-view-label="inboxErrorShow">${0}</p></div><div class="${0}"><a class="${0}" href="${0}" data-role="show-all-button" data-analytics-clickable data-analytics-click-label="showMoreClick">${0}</a></div></div>`),"mpof_ki myre_zn m7er_k4",b,k,v("something went wrong..."),$,v("unfortunately we could not view your messages."),x,C,e,v("open message center")))(this.parameters);this.setContent(t)}),n(this,"setContent",e=>{this.content.innerHTML=e}),n(this,"addMessageCenterSurveyClickEventListener",()=>{this.content.querySelector('[data-role="survey-link"]').addEventListener("click",this.onMessageCenterSurveyClick,!1)}),n(this,"onMessageCenterSurveyClick",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href");this.setMessageCenterSurveyPreferenceAndChangeLocation(t)}),n(this,"setMessageCenterSurveyPreferenceAndChangeLocation",e=>{this.window.opbox.preferences.set("displayMessageCenterSurvey",!1).then(()=>{this.window.location=e}).catch(()=>{this.window.location=e})}),n(this,"filterEmptyThreads",e=>{const t=Object.assign({},e);return t.threads=t.threads.filter(({lastMessage:e})=>!!e),t}),this.window=e,this.services=r,this.api=t,this.root=s,this.content=s.querySelector("#mc-header-component"),this.parameters=a}initialize(){const{isAuthenticated:e,isPageCached:t}=this.parameters,s=void 0!==(e=>{const{cookie:t}=document;if(!t)return;const s=t.split("; ").reduce((e,t)=>{const s=t.split("="),a=decodeURIComponent(s[0]),r=decodeURIComponent(s[1]);return e[a]=r,e},{});return s[e]})("userIdentity");e||t&&s?this.root.addEventListener("inViewport",this.onOpen,!1):this.setContent(U(this.window))}}window.opbox.component.register({prototypeName:"allegro.messageCenter.header"},class{constructor({baseNode:e,props:t,services:s}){this.baseNode=e,this.props=t,this.services=s}onMount(){this.messageCenterInbox=new W(window,new r(window),this.baseNode,this.props.parameters,this.services),this.messageCenterInbox.initialize()}})},R0yb(e,t,s){var a;a=()=>(e=>{var t={};function s(a){if(t[a])return t[a].exports;var r=t[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}return s.m=e,s.c=t,s.p="",s(0)})([(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pl";return s=>""+n(Math.floor(((e||new Date)-s)/1e3),t)},Object.freeze({pl:1,en:2});var s=Object.freeze({month(e){return 1===e?"1 miesiąc temu":e>=2&&e<=4?e+" miesiące temu":e>=5&&e<=11?e+" miesięcy temu":12===e?"rok temu":"ponad rok temu"},day(e){return e+" "+(1===e?"dzień":"dni")+" temu"},hour(e){return 1===e?e+" godzinę temu":e>10&&e<22?e+" godzin temu":e%10>1&&e%10<5?e+" godziny temu":e+" godzin temu"},minute(e){return e<=0?"przed chwilą":1===e?e+" minutę temu":e>1&&e<5?e+" minuty temu":e>=10&&e<20?e+" minut temu":e%10>1&&e%10<5?e+" minuty temu":e+" minut temu"}}),a=Object.freeze({month(e){return 1===e?"1 month ago":e<12?e+" months ago":12===e?"1 year ago":"over a year ago"},day(e){return e+" "+(1===e?"day":"days")+" ago"},hour(e){return 1===e?e+" hour ago":e+" hours ago"},minute(e){return e<=0?"a moment ago":1===e?e+" minute ago":e+" minutes ago"}}),r=Object.freeze({pl:s,en:a});function n(e,t){var s=r[t];if(e>=2592e3){var a=Math.round(e/2592e3);return s.month(a)}if(e>=86400){var n=Math.floor(e/86400);return s.day(n)}if(e>=3600){var m=Math.floor(e/3600);return s.hour(m)}var o=Math.floor(e/60);return s.minute(o)}}]),e.exports=a()},dP7j(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/megaphone-a9d4d8d271.svg"}')}}));
//# sourceMappingURL=index.es6-pl-PL_aa87f2ae.js.map