!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://assets.allegrostatic.com/opbox-user-inbox/",n(n.s=0)}({0:function(e,t,n){e.exports=n("O14P")},GI1G:function(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/arrowhead-9148b8f39c.svg","b":"https://assets.allegrostatic.com/metrum/icon/three-dots-cc8d7d016a.svg"}')},O14P:function(e,t,n){"use strict";n.r(t);var r={};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(r),n.d(r,"inbox",(function(){return u})),n.d(r,"inboxLoginButton",(function(){return c})),n.d(r,"messages",(function(){return l})),n.d(r,"message",(function(){return m})),n.d(r,"messageLink",(function(){return f})),n.d(r,"text",(function(){return d})),n.d(r,"messageText",(function(){return _})),n.d(r,"emptyText",(function(){return g})),n.d(r,"guestText",(function(){return p})),n.d(r,"errorText",(function(){return h})),n.d(r,"guestContentWrapper",(function(){return v})),n.d(r,"registerButton",(function(){return y})),n.d(r,"spinner",(function(){return b})),n.d(r,"messageDisplayed",(function(){return w})),n.d(r,"messageNew",(function(){return x})),n.d(r,"messageClicked",(function(){return j})),n.d(r,"messageIcon",(function(){return k})),n.d(r,"messageTime",(function(){return M})),n.d(r,"right9px",(function(){return q})),n.d(r,"messageMenuDropdown",(function(){return z})),n.d(r,"messageMenuDropdownToggle",(function(){return E})),n.d(r,"messageMenuDropdownToggleActive",(function(){return L})),n.d(r,"messageMenuDropdownContentContainer",(function(){return S})),n.d(r,"messageMenuDropdownContent",(function(){return D})),n.d(r,"messageMenuDropdownOpen",(function(){return C})),n.d(r,"messageMenuActions",(function(){return A})),n.d(r,"messageMenuAction",(function(){return O})),n.d(r,"messageMenuActionLink",(function(){return T})),n.d(r,"messageGroup",(function(){return I})),n.d(r,"messageGroupHeader",(function(){return N})),n.d(r,"messageGroupToggle",(function(){return G})),n.d(r,"arrowIcon",(function(){return P})),n.d(r,"messageGroupToggleOpen",(function(){return U})),n.d(r,"messageGroupContentInvisible",(function(){return R})),n.d(r,"messageGroupContent",(function(){return K})),n.d(r,"messageGroupContentVisible",(function(){return V}));var u="mpof_ki myre_zn mr3m_1 m389_6m m7f5_6m _0f0f1_3ysel",c="mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 m3h2_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1bc7 mp4t_16 mryx_32 mpof_vs mupj_5k _0f0f1_ERK1D",l="mx4z_5x mr3m_1 m7er_k4 mp4t_0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0 _0f0f1_3KcyV",m="mp7g_oh mpof_z0 mp4t_0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0 msts_9u _0f0f1_27WWV",f="mpof_ki mli2_1 mj9z_5r m7f5_5x m389_5x _0f0f1_3NjUU",d="_1h7wt _9hx3e _0f0f1_10wpA",_="_1h7wt _9hx3e _0f0f1_yC03d",g="mzmg_6m mgmw_ag mg9e_24 mj7a_24",p="mgmw_ag",h="m7er_56 msts_szl mx4z_5x mg9e_16 mvrt_16 mj7a_16 mh36_16 mp4t_16",v="mzmg_6m mg9e_24 mj7a_24",y="mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mpof_vs",b="_6gjm5 mp4t_24 m3h2_24 mryx_24 munh_24",w="_0f0f1_2yU-d",x="_0f0f1_3BP2u",j="_0f0f1_1a6Wt",k="mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 isflp mg9e_0 mvrt_0 mj7a_0 mh36_0 mli2_0 _0f0f1_20QA1",M="_6x7yn mpof_ki m389_6m _0f0f1_ETIEc",q="_0f0f1_E6ipK",z="mp7g_f6 mqen_m6 m9tr_5r _0f0f1_E6ipK _0f0f1_248ly",E="_w7z6o _ypulx m9vn_d2 m9vn_gl_m _0f0f1_2e_I7",L="m9vn_d2",S="mp7g_oh",D="mp7g_f6 mpof_5r mjyo_6x mjb5_w6 mg9e_0 mvrt_0 mj7a_0 mh36_0 msts_9u mx7m_1 m911_co mefy_co mnyp_co mdwl_co mlkp_ag mnjl_0 _0f0f1_wYIFj",C="_0f0f1_3JGSa",A="_3a4zn _12vfa m7er_k4 mzmg_6m mh36_16 mvrt_16 _0f0f1_2_Zk-",O="_1bmp9 mryx_0",T="_w7z6o _ypulx mtsp_ib",I="_0f0f1_3CcuH",N="mp7g_oh _0f0f1_2SLxp",G="mp7g_f6 mqen_m6 _0f0f1_E6ipK _0f0f1_2xCmc",P="mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 isflp mg9e_0 mvrt_0 mj7a_0 mh36_0 _0f0f1_3d2yY",U="_0f0f1_337Tu",R="mpof_5r",K="mpof_5r _0f0f1_1qkU4 _0f0f1_2csNU",V="mpof_z0";function $(e){if(Array.isArray(e))return e}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function H(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(e,t){return $(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(e,t)||Z(e,t)||H()}function F(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},Y=RegExp(Object.keys(J).join("|"),"g"),Q=function(e){return J[e]},X=function(e){return(e+"").replace(Y,Q)},ee=function(e){if(e instanceof te)return e;if(Array.isArray(e)){for(var t="",n=e.length,r=0;r<n;r++)t+=e[r]instanceof te?e[r]:X(e[r]);return t}return X(e)},te=function(){function e(t,n){o(this,e),this.$p=t,this.$s=n}return i(e,[{key:"toString",value:function(){for(var e=this.$p[0],t=this.$s.length,n=0;n<t;n++)e+=ee(this.$s[n])+this.$p[n+1];return e}}]),e}(),ne=function(e){return new te([e+""],[])},re=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new te(e,n)},oe=n("GI1G"),ae={"pl-PL":{delete:[["",["Usuń wiadomość"]]],"delete-thread":[["",["Usuń cały wątek"]]],"more-than-month":[["",["ponad miesiąc"]]],ago:[["",["temu"]]],day:[["",["dzień","dni"]]],"hour-short":[["",["godz."]]],"minute-short":[["",["min."]]],sent:[["",["Wysłane"]]],category:[["",["Kategoria"]]],"expand-thread":[["",["Rozwiń wątek"]]],"expand-menu":[["",["Rozwiń menu"]]],"manage-message":[["",["Zarządzaj tą wiadomością"]]],"loading-messages-failed":[["",["Nie mogliśmy wyświetlić Twoich powiadomień."]]],login:[["",["Zaloguj się"]]],register:[["",["Zarejestruj się"]]],"log-in-to-show-messages":[["",["Zaloguj się, aby zobaczyć <br>swoje powiadomienia."]]],"dont-have-account":[["",["Nie masz jeszcze konta?"]]],"no-new-messages":[["",["Nie masz żadnych <br>nowych powiadomień."]]]}},ie=/({{[^}]+}}|{%[^%}]+%})/g,se=/({{[^}]+}})/g,ue=/({%[^%}]+%})/g,ce=/({{\s*|\s*}}|{%\s*|\s*%})/g;function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e)throw Error("Translation has to be an array");return e.find((function(e){return e[0]===t}))[1]}var me,fe=function(e,t,n){var r=ae["pl-PL"][e];if(!r)throw Error('Missing translation for lang "pl-PL" and key "'.concat(e,'"'));return t?function(e,t,n){var r=le(e,t.context);return function(e,t,n){if(n){var r=0;return e.split(ie).map((function(n){if(n.match(ue)){var o=t.formatters[r];if(o)return r+=1,o(n.replace(ce,""));throw Error('Missing translation formatter for "'.concat(e,'"'))}return n.match(se)?t[n.replace(ce,"")]:n}))}var o=e.match(ie),a=0;return o?o.reduce((function(n,r){var o=r.replace(ce,"");if(r.match(ue)){var i=t.formatters[a];if(i)return a+=1,n.replace(r,i(o));throw Error('Missing translation formatter for "'.concat(e,'"'))}return r.match(se)?n.replace(r,t[o]):n}),e):e}(r=parseInt(t.count,10)>=0?function(e,t){var n,r=1==(n=t)?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;return"boolean"!=typeof r?e[r]:e[r?1:0]}(r,t.count):B(r,1)[0],t,n)}(r,t,n):le(r)[0]},de=(me=r,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return me[e]||e})).join(" ")});function _e(){var e=F(['<div class="','">','<a href="','" class="','" rel="nofollow" data-role="login-button">',"</a>",'<a href="','" class="','" rel="nofollow" data-analytics-clickable data-role="register-button">',"</a></div>"]);return _e=function(){return e},e}function ge(){var e=F(['<p class="'," ",'">',"</p>"]);return ge=function(){return e},e}function pe(){var e=F(['<ul class="','" data-role="message-list">',"</ul>"]);return pe=function(){return e},e}function he(){var e=F(['<li class="','"><ol class="','">'," ",'</ol><ol data-role="message-group-content" class="','">',"</ol></li>"]);return he=function(){return e},e}function ve(){var e=F(['<div class="','" data-role="message-group-toggle">',"</div>"]);return ve=function(){return e},e}function ye(){var e=F(['<li class="','" data-role="message">'," ","</li>"]);return ye=function(){return e},e}function be(){var e=F(['<a data-role="message-link" href="','" class="','" data-analytics-clickable data-analytics-click-value="','">','<span><span class="','">',"</span>","</span></a>"]);return be=function(){return e},e}function we(){var e=F(['<div class="','" data-role="message-actions-dropdown"><button type="button" data-role="message-dropdown" aria-label="','" class="','">','</button><div class="','"><div class="','">',"</div></div></div>"]);return we=function(){return e},e}function xe(){var e=F(['<ul class="','"><li class="','"><button type="button" class="','" data-role="','" data-id-to-delete="','">',"</button></li></ul>"]);return xe=function(){return e},e}function je(){var e=F(['<img class="','" src="','" alt="','" width="100%" height="100%" />']);return je=function(){return e},e}function ke(){var e=F(['<time class="','" datetime="','" aria-label="'," ",'">',"</time>"]);return ke=function(){return e},e}function Me(){var e=F(['<img class="','" src="','" alt="','" width="100%" height="100%" />']);return Me=function(){return e},e}function qe(){var e=F(['<img class="','" src="','" alt="','" width="100%" height="100%" />']);return qe=function(){return e},e}var ze,Ee=(ze=new Date,function(e){var t=function(e){if(e>=2592e3)return fe("more-than-month");if(e>=86400){var t=Math.floor(e/86400),n=t>1?2:1;return"".concat(t," ").concat(fe("day",{count:n}))}return e>=3600?"".concat(Math.floor(e/3600)," ").concat(fe("hour-short")):"".concat(Math.max(1,Math.floor(e/60))," ").concat(fe("minute-short"))}(Math.floor((ze-e)/1e3));return"".concat(t," ").concat(fe("ago"))}),Le=re(qe(),P,oe.a,fe("expand-thread")),Se=re(Me(),P,oe.b,fe("expand-menu"));function De(e,t,n){var r=B(e?["action-delete-group",fe("delete-thread"),t]:["action-delete",fe("delete"),n],3),o=r[0],a=r[1],i=r[2];return re(xe(),A,O,T,o,i,a)}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return re(we(),z,fe("manage-message"),E,Se,S,D,De(t,n,e))}function Ae(e,t,n,r){var o="".concat("/inbox/redirect/id/").concat(t);return re(be(),o,f,n,function(e){return re(je(),k,e,fe("category"))}(r),_,n,ne(function(e){var t=new Date(e),n=t.toLocaleDateString(),r=Ee(t);return re(ke(),M,n,fe("sent"),r,r)}(e)))}function Oe(e){var t=e.text,n=e.image.svg,r=e.status,o=e.createdAt,a=e.tinkerbellId,i=e.groupId,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=de("message","message".concat(r.charAt(0)+r.slice(1).toLowerCase()));return re(ye(),u,Ce(a,s,i),Ae(o,a,t,n))}var Te=function(e){return Oe(e,!1)};function Ie(e){if(1===e.length)return Te(e[0]);var t,n=$(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||Z(t)||H(),r=n[0],o=n.slice(1),a=Oe(r,!0),i=o.map(Te).join(""),s=re(ve(),G,Le);return re(he(),I,N,ne(a),ne(s),K,ne(i))}function Ne(e){return"".concat("group_").concat(e)}function Ge(e){var t=e.className,n=e.content;return re(ge(),t,d,ne(n))}function Pe(){var e=fe("no-new-messages");return Ge({className:g,content:e})}function Ue(e){var t=fe("log-in-to-show-messages"),n=fe("dont-have-account"),r=Ge({className:p,content:t}),o=Ge({className:p,content:n}),a="/logowanie?origin_url=".concat(encodeURIComponent(e.location));return re(_e(),v,ne(r),a,c,fe("login"),ne(o),"/rejestracja",y,fe("register"))}var Re=".".concat(I),Ke=function(){function e(t,n,r,a){var i=this;o(this,e),s(this,"onOpen",(function(){i.root.removeEventListener("inViewport",i.onOpen,!1),i.api.getMessages().then(i.onResponse).catch(i.onError)})),s(this,"onResponse",(function(e){var t,n=e.data,r=(t=n.messages).length>0?function(e){var t=function(e){var t=e.reduce((function(e,t){var n=e,r=t.groupId||t.tinkerbellId;return(n[Ne(r)]||(n[Ne(r)]=[])).push(t),n}),{});return Object.values(t)}(e).map(Ie).join("");return re(pe(),l,ne(t))}(t):Pe();i.setContent(r),i.setupListeners(),i.handleDisplayed(n)})),s(this,"onError",(function(e){var t=401===e.status?Ue(i.window):function(){var e=fe("loading-messages-failed");return Ge({className:h,content:e})}();i.setContent(t)})),s(this,"setContent",(function(e){i.content.innerHTML=e})),s(this,"handleDisplayed",(function(e){var t=e.messages;i.services&&i.services.get("opbox-notification-service").then((function(e){e.reset("inboxes")}));var n=t.filter((function(e){return"CLICKED"!==e.status}));n.length>0&&i.api.updateStatusToDisplayed(n.map((function(e){return e.tinkerbellId})))})),s(this,"setupListeners",(function(){i.root.querySelectorAll('[data-role="message-group-toggle"]').forEach((function(e){return e.addEventListener("click",i.toggleGroupVisibility)})),i.root.querySelectorAll('button[data-role="message-dropdown"]').forEach((function(e){return e.addEventListener("click",i.toggleDeleteMessageDropdown)})),i.root.querySelectorAll('[data-role="action-delete"]').forEach((function(e){return e.addEventListener("click",i.singleMessageDeleteListener(e.dataset.idToDelete))})),i.root.querySelectorAll('[data-role="action-delete-group"]').forEach((function(e){return e.addEventListener("click",i.groupMessageDeleteListener(e.dataset.idToDelete))}))})),s(this,"toggleDeleteMessageDropdown",(function(e){e.preventDefault();var t=e.currentTarget.parentElement.parentElement.querySelector('[data-role="message-actions-dropdown"]'),n=t.classList.contains(C);i.root.querySelectorAll('[data-role="message-actions-dropdown"]').forEach(i.hideActionsDropdown),n||(t.classList.add(C),t.querySelector('button[data-role="message-dropdown"]').classList.add(L))})),s(this,"toggleGroupVisibility",(function(e){e.preventDefault();var t=e.currentTarget,n=t.parentElement;if(n){t.classList.toggle(U);var r=n.parentElement.querySelector('[data-role="message-group-content"]');r.classList.toggle(V),r.classList.toggle(R)}})),this.window=t,this.api=n,this.root=r,this.content=r.querySelector('[data-role="inbox"]'),this.services=a}return i(e,[{key:"initialize",value:function(){null!==function(e){for(var t=document.cookie.split(/;\s*/),n=t.length-1;n>=0;n-=1){var r=B(t[n].split("=").map((function(e){return decodeURIComponent(e)})),2),o=r[0],a=r[1];if("qeppo_login2"===o)return a}return null}()?this.root.addEventListener("inViewport",this.onOpen,!1):this.setContent(Ue(this.window))}},{key:"groupMessageDeleteListener",value:function(e){var t=this;return function(n){n.stopPropagation(),t.api.deleteGroup(e),t.deleteMessageListItem(n.target.closest(Re)),t.window.opbox.analytics.sendClickEvent({contextNode:t.root,label:"deleteMessageGroup",value:e})}}},{key:"deleteMessageListItem",value:function(e){e.remove(),this.root.querySelectorAll('[data-role="message"]').length||(this.content.innerHTML=Pe())}},{key:"singleMessageDeleteListener",value:function(e){var t=this;return function(n){n.stopPropagation(),t.api.delete(e),t.deleteSingleMessage(n.target.closest('[data-role="message"]')),t.window.opbox.analytics.sendClickEvent({contextNode:t.root,label:"deleteSingleMessage",value:e})}}},{key:"deleteSingleMessage",value:function(e){var t=e.parentNode,n=t.matches('[data-role="message-group-content"]'),r=1===t.childElementCount;n&&r&&this.removeGroupToggleControls(t),this.deleteMessageListItem(e)}},{key:"removeGroupToggleControls",value:function(e){var t=e.parentNode.querySelector('[data-role="message-group-toggle"]');e.remove(),t.remove()}},{key:"hideActionsDropdown",value:function(e){e.classList.remove(C),e.querySelector('button[data-role="message-dropdown"]').classList.remove(L)}}]),e}(),Ve={withCredentials:!0,headers:{Accept:"application/json","Content-type":"application/json"}},$e=Object.assign({},Ve,{headers:Object.assign({},Ve.headers,{"Content-type":"application/vnd.allegro.public.v2+json"})}),We=function(){function e(t){o(this,e);var n=t.opbox.edge;this.edge=n}return i(e,[{key:"getMessages",value:function(){return this.edge.get("/inbox/messages",Ve)}},{key:"updateStatusToDisplayed",value:function(e){var t={tinkerbellIdEvents:e.map((function(e){return{tinkerbellId:e}}))};this.edge.post("/inbox/events/displayed",t,$e)}},{key:"delete",value:function(e){this.edge.delete("".concat("/inbox/messages","/").concat(e),Ve)}},{key:"deleteGroup",value:function(e){this.edge.delete("".concat("/inbox/messages/group","/").concat(e),Ve)}}]),e}(),Ze=function(){function e(t){var n=t.baseNode,r=t.services;o(this,e),this.baseNode=n,this.services=r}return i(e,[{key:"onMount",value:function(){var e=new We(window);new Ke(window,e,this.baseNode,this.services).initialize()}}]),e}();window.opbox.component.register({prototypeName:"allegro.user.inbox"},Ze)}}));
//# sourceMappingURL=index-pl-PL_c9962b7f.js.map